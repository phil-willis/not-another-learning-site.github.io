<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description" content="Not another learning site."/><meta property="og:image" content="https://og-image.now.sh/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><title>Not another learning site.</title><meta property="og:image" content="/assets/blog/hello-world/cover.jpg"/><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/14c6557f9a1d8dbdbefa.css" as="style"/><link rel="stylesheet" href="/_next/static/css/14c6557f9a1d8dbdbefa.css" data-n-g=""/><link rel="preload" href="/_next/static/css/6f4272a048091359c753.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6f4272a048091359c753.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-189c53927ffd3caf09c3.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-c5113a73163ba9a6512c.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-71948af4b0f09c0fc30e.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-099af13ebb345ee16499.js" as="script"/><link rel="preload" href="/_next/static/chunks/664-aaadba6b31e09bfd632a.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/learn/%5Bslug%5D-a0ede1caf55bb42d5ff9.js" as="script"/></head><body><div id="__next"><div class="min-h-screen"><main><div class="container mx-auto px-5"><h2 class="text-2xl md:text-4xl font-bold tracking-tight md:tracking-tighter leading-tight mb-20 mt-8"><a class="hover:underline" href="/">Learn</a>.</h2><article class="mb-32"><h1 class="text-6xl md:text-7xl lg:text-8xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-left">Databases</h1><div class="mb-8 md:mb-16 sm:mx-0"><div class="sm:mx-0"><img src="/assets/blog/hello-world/cover.jpg" alt="Cover Image for Databases" class="shadow-sm" layout="responsive" width="1240" height="620"/></div></div><div class="max-w-2xl mx-auto"><div class="block md:hidden mb-6"><div>TODO: add language chip here</div></div></div><div class="max-w-2xl mx-auto"><div class="markdown-styles_markdown__1x9gM"><h1>Databases</h1>
<ul>
<li>[x] MySQL + baked in spatial functions</li>
<li>[x] PostgreSQL + PostGIS</li>
<li>[ ] SQLite + SpatiaLite</li>
<li>[ ] DynamoDB</li>
<li>[ ] Firebase</li>
<li>[ ] MongoDB</li>
<li>[ ] CouchDB</li>
</ul>
<h1>MySQL</h1>
<ul>
<li>Basic Docker stuff
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell"><span class="token comment"># show all running containers</span>
$ docker <span class="token function">ps</span>

<span class="token comment"># Show all stoped containers</span>
$ docker <span class="token function">ps</span> -a

<span class="token comment"># Pull the latest image</span>
$ docker pull mysql/mysql-server:latest

<span class="token comment"># Create &#x26; run a container</span>
$ docker run --name some-mysql -p <span class="token number">3306</span>:3306  -e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456789</span> -d mysql

<span class="token comment"># stop/start</span>
$ docker stop some-mysql
$ docker start some-mysql


<span class="token comment"># Docker cleanups</span>
$ docker system prune
$ docker image prune

<span class="token comment"># Create a database dump</span>
$ docker <span class="token builtin class-name">exec</span> some-mysql <span class="token function">sh</span> -c <span class="token string">'exec mysqldump --all-databases -uroot -p"<span class="token variable">$MYSQL_ROOT_PASSWORD</span>"'</span> <span class="token operator">></span> /some/path/on/your/host/all-databases.sql

<span class="token comment"># Restoring data from a dump file</span>
$ docker <span class="token builtin class-name">exec</span> -i some-mysql <span class="token function">sh</span> -c <span class="token string">'exec mysql -uroot -p"<span class="token variable">$MYSQL_ROOT_PASSWORD</span>"'</span> <span class="token operator">&#x3C;</span> /some/path/on/your/host/all-databases.sql
</code></pre></div>
</li>
</ul>
<h2>Connecting to your Database (MySQL v8)</h2>
<ul>
<li>
<p>First spin up a docker container</p>
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell"><span class="token comment"># Pull the latest image</span>
$ docker pull mysql/mysql-server:latest

<span class="token comment"># Create &#x26; run a container</span>
$ docker run --name some-mysql -p <span class="token number">3306</span>:3306 -p <span class="token number">33060</span>:33060  -e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456789</span> -d mysql
$ docker <span class="token builtin class-name">exec</span> -it some-mysql mysql -uroot -p
mysql<span class="token operator">></span> CREATE DATABASE letsgetspatial<span class="token punctuation">;</span>
</code></pre></div>
</li>
<li>
<p>Connecting to the <code>MySQL v8</code> Database with <a href="https://marketplace.visualstudio.com/items?itemName=mtxr.sqltools"><code>SQLTools</code> extension</a>. You will also have to download the Extensions drivers: MySQL</p>
<ul>
<li><em>NOTE</em> we had to make a database <code>letsgetspatial</code> manually above
<div class="remark-highlight"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"mysqlOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"authProtocol"</span><span class="token operator">:</span> <span class="token string">"xprotocol"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"previewLimit"</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
  <span class="token property">"server"</span><span class="token operator">:</span> <span class="token string">"localhost"</span><span class="token punctuation">,</span>
  <span class="token property">"port"</span><span class="token operator">:</span> <span class="token number">33060</span><span class="token punctuation">,</span>
  <span class="token property">"driver"</span><span class="token operator">:</span> <span class="token string">"MySQL"</span><span class="token punctuation">,</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"MySQL_v8"</span><span class="token punctuation">,</span>
  <span class="token property">"database"</span><span class="token operator">:</span> <span class="token string">"letsgetspatial"</span><span class="token punctuation">,</span>
  <span class="token property">"username"</span><span class="token operator">:</span> <span class="token string">"root"</span><span class="token punctuation">,</span>
  <span class="token property">"password"</span><span class="token operator">:</span> <span class="token string">"123456789"</span><span class="token punctuation">,</span>
  <span class="token property">"connectionTimeout"</span><span class="token operator">:</span> <span class="token number">15</span>
<span class="token punctuation">}</span>
</code></pre></div>
</li>
<li>Click the <code>Test Connection</code> (it kinda appears like a white rectanglar button)</li>
<li>Under the <code>Connection</code> section in the side panel click this <code>some-mysql</code> connection and it will open up a sql window where you can write queries</li>
<li>Use <code>--</code> to write comments &#x26; <code>-- @block</code> to write blocks that you can execute only the block</li>
</ul>
</li>
<li>
<p>Backing up data</p>
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell"><span class="token comment"># Create a database dump</span>
$ docker <span class="token builtin class-name">exec</span> some-mysql <span class="token function">sh</span> -c <span class="token string">'exec mysqldump --all-databases -uroot -p"<span class="token variable">$MYSQL_ROOT_PASSWORD</span>"'</span> <span class="token operator">></span> /some/path/on/your/host/all-databases.sql

<span class="token comment"># Restoring data from a dump file</span>
$ docker <span class="token builtin class-name">exec</span> -i some-mysql <span class="token function">sh</span> -c <span class="token string">'exec mysql -uroot -p"<span class="token variable">$MYSQL_ROOT_PASSWORD</span>"'</span> <span class="token operator">&#x3C;</span> /some/path/on/your/host/all-databases.sql
</code></pre></div>
</li>
</ul>
<h2>Docker Compose way</h2>
<ul>
<li>Where gonna use <code>docker-compose</code> to make our lives easier
<ul>
<li>Create a <code>docker-compose.yml</code> files with:
<div class="remark-highlight"><pre class="language-yml"><code class="language-yml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.3'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">db</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span>latest
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">MYSQL_DATABASE</span><span class="token punctuation">:</span> <span class="token string">'letsgetspatial'</span>
      <span class="token comment"># So you don't have to use root, but you can if you like</span>
      <span class="token key atrule">MYSQL_USER</span><span class="token punctuation">:</span> <span class="token string">'user'</span>
      <span class="token comment"># You can use whatever password you like</span>
      <span class="token key atrule">MYSQL_PASSWORD</span><span class="token punctuation">:</span> <span class="token string">'password'</span>
      <span class="token comment"># Password for root access</span>
      <span class="token key atrule">MYSQL_ROOT_PASSWORD</span><span class="token punctuation">:</span> <span class="token string">'password'</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token comment"># &#x3C;Port exposed> : &#x3C; MySQL Port running inside container></span>
      <span class="token punctuation">-</span> <span class="token string">'3306:3306'</span>
      <span class="token punctuation">-</span> <span class="token string">'33060:33060'</span>
    <span class="token key atrule">expose</span><span class="token punctuation">:</span>
      <span class="token comment"># Opens port 3306 on the container</span>
      <span class="token punctuation">-</span> <span class="token string">'3306'</span>
      <span class="token punctuation">-</span> <span class="token string">'33060'</span>
      <span class="token comment"># Where our data will be persisted</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> my<span class="token punctuation">-</span>db<span class="token punctuation">:</span>/var/lib/mysql
      
  <span class="token comment"># http://localhost:8080/ to log into your DB</span>
  <span class="token key atrule">adminer</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> adminer
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8080<span class="token punctuation">:</span><span class="token number">8080</span>
      
<span class="token comment"># Names our volume</span>
<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  my<span class="token punctuation">-</span>db<span class="token punctuation">:</span>
</code></pre></div>
</li>
<li>Now we can run one command to get it all running:
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell"><span class="token comment"># build/run contains</span>
$ docker-compose up

<span class="token comment"># stop all containers (for ctl+c twice)</span>
$ docker-compose down

<span class="token comment"># Clean up everything</span>
$ docker-compose down -v --rmi all --remove-orphans
</code></pre></div>
</li>
</ul>
</li>
</ul>
<h2>MySQL SQL Statements</h2>
<div class="remark-highlight"><pre class="language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Users<span class="token punctuation">(</span>
  id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
  email  <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span>
  bio <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
  country <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> Users<span class="token punctuation">(</span>
  email<span class="token punctuation">,</span>
  bio<span class="token punctuation">,</span>
  country
<span class="token punctuation">)</span> 
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span>
  <span class="token string">'hello@world.com'</span><span class="token punctuation">,</span>
  <span class="token string">'I love strangers'</span><span class="token punctuation">,</span>
  <span class="token string">'US'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Users<span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Bookings<span class="token punctuation">(</span>
  id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
  guest_id <span class="token keyword">INT</span><span class="token punctuation">,</span>
  room_id <span class="token keyword">INT</span><span class="token punctuation">,</span>
  start_date <span class="token keyword">datetime</span><span class="token punctuation">,</span>
  end_date <span class="token keyword">datetime</span><span class="token punctuation">,</span>
  price <span class="token keyword">int</span><span class="token punctuation">,</span>
  total <span class="token keyword">int</span><span class="token punctuation">,</span>
  created_at <span class="token keyword">datetime</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Rooms<span class="token punctuation">(</span>
  owner_id <span class="token keyword">INT</span><span class="token punctuation">,</span>
  price <span class="token keyword">INT</span><span class="token punctuation">,</span>
  hot_tub <span class="token keyword">boolean</span><span class="token punctuation">,</span>
  home_type <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
  room_type <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
  total_occupancy <span class="token keyword">INT</span><span class="token punctuation">,</span>
  total_bedrooms <span class="token keyword">INT</span><span class="token punctuation">,</span>
  total_bathrooms <span class="token keyword">INT</span><span class="token punctuation">,</span>
  summary <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  created_at <span class="token keyword">datetime</span><span class="token punctuation">,</span>
  updated_at <span class="token keyword">datetime</span><span class="token punctuation">,</span>
  latitude <span class="token keyword">FLOAT</span><span class="token punctuation">,</span>
  longitude <span class="token keyword">FLOAT</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<h2>MySQL with Spatial Data</h2>
<ul>
<li>
<p><strong>MySQL <code>POINT(lng,lat)</code>, just like PostGIS maintains (lng,lat), however... the <code>ST_GeomFromText</code> like <code>ST_GeomFromText('POINT(45.5051 -122.6750)', 4326)</code> DOES <code>LAT/LNG</code>??</strong></p>
</li>
<li>
<p>There is HUGE difference from MySQL v5.7 to v8.0</p>
</li>
<li>
<p>Prior to v8 spatial data there wasn't multiple spatial reference systems and geographic computations all computations were Catesian</p>
</li>
<li>
<p>So what is the least you need to know about??</p>
<ul>
<li>GIS libraries use <a href="https://epsg.io/">EPSG</a> (EPSG actually stands for <code>European Petroleum Survey Group</code>) codes as Spatial Reference System Identifiers (SRIDs)</li>
<li>All you need to know when working with spatial data on the web is most maps use the Spatial Reference System of <code>4326</code> which is <code>WGS 84 (Google Earth is in a Geographic coordinate system)</code></li>
<li>Geospatial data is should be stored in internal geometry format either <code>Well-Known Text (WKT)</code> or <code>Well-Known Binary (WKB)</code> format.</li>
</ul>
</li>
<li>
<p><code>Point(X,Y)</code> is a constructor for numbers with precision and does not require converting first to text making it faster.</p>
<div class="remark-highlight"><pre class="language-sql"><code class="language-sql"><span class="token comment">-- Slower</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> SOME_DB <span class="token punctuation">(</span>name<span class="token punctuation">,</span> coordinates<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">"Portland"</span><span class="token punctuation">,</span> ST_GeomFromText<span class="token punctuation">(</span><span class="token string">'POINT(45.5051 -122.6750)'</span><span class="token punctuation">,</span> <span class="token number">4326</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- Faster</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> SOME_DB <span class="token punctuation">(</span>name<span class="token punctuation">,</span> coordinates<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">"Portland"</span><span class="token punctuation">,</span> ST_SRID<span class="token punctuation">(</span><span class="token keyword">POINT</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">122.6750</span><span class="token punctuation">,</span> <span class="token number">45.5051</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">4326</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
</li>
<li>
<p>Let's define some points instead of 2 columns lat/long</p>
<div class="remark-highlight"><pre class="language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>places<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>coordinates<span class="token punctuation">`</span> <span class="token keyword">POINT</span> SRID <span class="token number">4326</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
</li>
<li>
<p>Let's create an idex</p>
<div class="remark-highlight"><pre class="language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> pt_idx <span class="token keyword">ON</span> places<span class="token punctuation">(</span>coordinates<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
</li>
<li>
<p>Now let's add some points</p>
<ul>
<li><strong>NOTE</strong> the <code>POINT(LNG, LAT)</code> format</li>
</ul>
<div class="remark-highlight"><pre class="language-sql"><code class="language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>places<span class="token punctuation">`</span> <span class="token punctuation">(</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>coordinates<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">"Portland"</span><span class="token punctuation">,</span> ST_SRID<span class="token punctuation">(</span><span class="token keyword">POINT</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">122.6795</span><span class="token punctuation">,</span> <span class="token number">45.52054</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">4326</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>places<span class="token punctuation">`</span> <span class="token punctuation">(</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>coordinates<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">"Vancouver"</span><span class="token punctuation">,</span> ST_SRID<span class="token punctuation">(</span><span class="token keyword">POINT</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">123.1207</span><span class="token punctuation">,</span> <span class="token number">49.2827</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">4326</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>places<span class="token punctuation">`</span> <span class="token punctuation">(</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>coordinates<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">"Seattle"</span><span class="token punctuation">,</span> ST_SRID<span class="token punctuation">(</span><span class="token keyword">POINT</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">122.33551</span><span class="token punctuation">,</span> <span class="token number">47.604311</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">4326</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>places<span class="token punctuation">`</span> <span class="token punctuation">(</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>coordinates<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">"San Francisco"</span><span class="token punctuation">,</span> ST_SRID<span class="token punctuation">(</span><span class="token keyword">POINT</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">122.416534</span><span class="token punctuation">,</span> <span class="token number">37.771800273</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">4326</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>places<span class="token punctuation">`</span> <span class="token punctuation">(</span> <span class="token punctuation">`</span>name<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>coordinates<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">"Ottawa"</span><span class="token punctuation">,</span> ST_SRID<span class="token punctuation">(</span><span class="token keyword">POINT</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">75.697174</span><span class="token punctuation">,</span> <span class="token number">45.42062</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">4326</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
</li>
<li>
<p>Select Data</p>
<div class="remark-highlight"><pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>  id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> ST_AsText<span class="token punctuation">(</span>coordinates<span class="token punctuation">)</span> <span class="token keyword">FROM</span> places<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span>  id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> ST_AsGeoJSON<span class="token punctuation">(</span>coordinates<span class="token punctuation">)</span> <span class="token keyword">FROM</span> places<span class="token punctuation">;</span>
</code></pre></div>
</li>
<li>
<p>Calculate distances</p>
<div class="remark-highlight"><pre class="language-sql"><code class="language-sql"><span class="token comment">-- Distance from the montreal</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span>
ST_Distance_Sphere<span class="token punctuation">(</span>coordinates<span class="token punctuation">,</span> ST_SRID<span class="token punctuation">(</span><span class="token keyword">POINT</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">73.6049652</span><span class="token punctuation">,</span> <span class="token number">45.503459</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">4326</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">FROM</span> places<span class="token punctuation">;</span>

<span class="token comment">-- Distance less that 500Km (500000m) from the montreal </span>
<span class="token keyword">SELECT</span> name <span class="token keyword">FROM</span> places
<span class="token keyword">WHERE</span> ST_Distance_Sphere<span class="token punctuation">(</span>coordinates<span class="token punctuation">,</span> ST_SRID<span class="token punctuation">(</span><span class="token keyword">POINT</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">73.6049652</span><span class="token punctuation">,</span> <span class="token number">45.503459</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">4326</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&#x3C;</span> <span class="token number">500000</span><span class="token punctuation">;</span>
</code></pre></div>
</li>
<li>
<p>Selects all points in a polygon</p>
</li>
<li>
<p>If you look closer, you’ll notice that the last point is the same as the first one and we have 5 points. This is because we need to “close” the polygon.</p>
<div class="remark-highlight"><pre class="language-sql"><code class="language-sql"><span class="token keyword">SET</span> <span class="token variable">@polygon</span> <span class="token operator">=</span> ST_SRID<span class="token punctuation">(</span>
  ST_GeomFromText<span class="token punctuation">(</span><span class="token string">'POLYGON(( -125.903320 44.668, -119.22 44.668, -119.22 50.2612, -125.903320 50.2612, -125.903320 44.668))'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token number">4326</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span>  <span class="token operator">*</span><span class="token punctuation">,</span> ST_AsText<span class="token punctuation">(</span>coordinates<span class="token punctuation">)</span>  <span class="token keyword">FROM</span> places <span class="token keyword">WHERE</span> ST_CONTAINS<span class="token punctuation">(</span><span class="token variable">@polygon</span><span class="token punctuation">,</span> coordinates<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
</li>
<li>
<p>Get the result as GeoJson</p>
<div class="remark-highlight"><pre class="language-sql"><code class="language-sql"><span class="token keyword">SET</span> <span class="token variable">@polygon</span> <span class="token operator">=</span> ST_SRID<span class="token punctuation">(</span>
  ST_GeomFromText<span class="token punctuation">(</span><span class="token string">'POLYGON(( </span>
<span class="token string">    -129.24316 43.16512263,</span>
<span class="token string">    -116.455078125 43.16512263,</span>
<span class="token string">    -116.455078125 52.24125614,</span>
<span class="token string">    -129.24316 52.24125614,</span>
<span class="token string">    -129.24316 43.165</span>
<span class="token string">  ))'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token number">4326</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> json_merge<span class="token punctuation">(</span>
  json_object<span class="token punctuation">(</span> <span class="token string">"type"</span><span class="token punctuation">,</span> <span class="token string">"FeatureCollection"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  json_object<span class="token punctuation">(</span> <span class="token string">"features"</span><span class="token punctuation">,</span> 
    json_arrayagg<span class="token punctuation">(</span>
      json_merge<span class="token punctuation">(</span>
        json_object<span class="token punctuation">(</span> <span class="token string">"type"</span><span class="token punctuation">,</span> <span class="token string">"Feature"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        json_object<span class="token punctuation">(</span> <span class="token string">"properties"</span><span class="token punctuation">,</span>  
          json_merge<span class="token punctuation">(</span>
            json_object<span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">,</span>
            json_object<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        json_object<span class="token punctuation">(</span><span class="token string">'geometry'</span><span class="token punctuation">,</span> ST_AsGeoJSON<span class="token punctuation">(</span>coordinates<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">)</span> 
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token keyword">FROM</span> places <span class="token keyword">WHERE</span> ST_CONTAINS<span class="token punctuation">(</span><span class="token variable">@polygon</span><span class="token punctuation">,</span> coordinates<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
</li>
</ul>
<h1>Postgres &#x26; PostGIS</h1>
<ul>
<li>The <code>postgis/postgis</code> image will have the following extensions installed:
<ul>
<li>postgis</li>
<li>postgis_topology</li>
<li>fuzzystrmatch</li>
<li>postgis_tiger_geocoder</li>
</ul>
</li>
</ul>
<h2>Docker stuff</h2>
<ul>
<li>Create a <code>docker-compose.yml</code> file
<div class="remark-highlight"><pre class="language-yml"><code class="language-yml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">"3.4"</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">pgAdmin</span><span class="token punctuation">:</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">image</span><span class="token punctuation">:</span> dpage/pgadmin4
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"8000:80"</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">PGADMIN_DEFAULT_EMAIL</span><span class="token punctuation">:</span> 1234@admin.com
      <span class="token key atrule">PGADMIN_DEFAULT_PASSWORD</span><span class="token punctuation">:</span> <span class="token number">1234</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> pgadmin<span class="token punctuation">:</span>/var/lib/pgadmin
  <span class="token key atrule">postgis</span><span class="token punctuation">:</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">image</span><span class="token punctuation">:</span> postgis/postgis
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> <span class="token string">"postgis_container"</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">"5432:5432"</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">POSTGRES_USER</span><span class="token punctuation">:</span> me
      <span class="token key atrule">POSTGRES_PASSWORD</span><span class="token punctuation">:</span> <span class="token number">1234</span>
      <span class="token key atrule">POSTGRES_DB</span><span class="token punctuation">:</span> letsgetspatial
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> pgvol<span class="token punctuation">:</span>/var/lib/postgresql/data
<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token key atrule">pgvol</span><span class="token punctuation">:</span>
  <span class="token key atrule">pgadmin</span><span class="token punctuation">:</span> 
</code></pre></div>
</li>
<li><code>docker-compose</code> commands:
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell"><span class="token comment"># Stop these services</span>
$ docker-compose stop

<span class="token comment"># Start these services</span>
$ docker-compose start

<span class="token comment"># Delete these services</span>
$ docker-compose down

<span class="token comment"># Delete all docker volumes</span>
$ docker volume prune
</code></pre></div>
</li>
</ul>
<h2>There are 2 ways to connect to the postgresdatabase server</h2>
<ol>
<li>PSQL</li>
</ol>
<ul>
<li>The above <code>docker-compose</code> command spins up a container that has postgres/postgis/psql installed in the container
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell"><span class="token comment"># Connect into the container</span>
$ docker <span class="token builtin class-name">exec</span> -it postgis_container <span class="token function">bash</span>

<span class="token comment"># Connect into postgres inside your container</span>
$ psql -d letsgetspatial -U me
</code></pre></div>
</li>
</ul>
<ol start="2">
<li>PG Admin4</li>
</ol>
<ul>
<li>The <code>docker-compose</code> command also spins up a container for <code>pgadmin4</code></li>
<li>To go to <code>pgadmin4</code> go to <code>http://localhost:8000/</code></li>
<li>User name that has been defined in the <code>docker-compose</code> is: <code>1234@admin.com</code>, and the password is <code>1234</code></li>
<li>Here you want to <code>Add new server</code> Take the below JSON data to fill in the GUI
<div class="remark-highlight"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  generalTab<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"letsgetspatial-server"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  connectionTab<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token property">"host"</span><span class="token operator">:</span> <span class="token string">"postgis"</span><span class="token punctuation">,</span>
    <span class="token property">"port"</span><span class="token operator">:</span> <span class="token string">"5432"</span><span class="token punctuation">,</span>
    <span class="token property">"user"</span><span class="token operator">:</span> <span class="token string">"me"</span><span class="token punctuation">,</span>
    <span class="token property">"password"</span><span class="token operator">:</span> <span class="token string">"1234"</span><span class="token punctuation">,</span>
    <span class="token property">"maintenaceDatabase"</span><span class="token operator">:</span> <span class="token string">"letsgetspatial"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
</li>
<li>You talbles will live in <code>letsgetspatial-server</code> > <code>Databases</code> > <code>letsgetspatial</code> > <code>Schemas</code> > <code>public</code> > <code>Tables</code></li>
</ul>
<h2>Postgres commands</h2>
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell"><span class="token comment"># List databases</span>
<span class="token assign-left variable">postgres</span><span class="token operator">=</span><span class="token punctuation">\</span>#  <span class="token punctuation">\</span>l

<span class="token comment"># Use or switch Databases</span>
<span class="token assign-left variable">postgres</span><span class="token operator">=</span><span class="token punctuation">\</span># <span class="token punctuation">\</span>c sales

<span class="token comment"># List tables</span>
<span class="token assign-left variable">postgres</span><span class="token operator">=</span><span class="token punctuation">\</span># <span class="token punctuation">\</span>dt
</code></pre></div>
<h2>Postgres/PostGIS Spatial Table</h2>
<div class="remark-highlight"><pre class="language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> EXTENSION postgis<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> PostGIS_version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- Create a table then add the spatial column</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> places <span class="token punctuation">(</span>
  id <span class="token keyword">int</span> GENERATED <span class="token keyword">BY</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">AS</span> <span class="token keyword">IDENTITY</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
  name <span class="token keyword">text</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> AddGeometryColumn<span class="token punctuation">(</span><span class="token string">'places'</span><span class="token punctuation">,</span><span class="token string">'geom'</span><span class="token punctuation">,</span><span class="token string">'4326'</span><span class="token punctuation">,</span><span class="token string">'POINT'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- Add a spatial index (to drop the index ...`DROP INDEX places_geom_idx;`)</span>
<span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> places_geom_idx <span class="token keyword">ON</span> places <span class="token keyword">USING</span> GIST <span class="token punctuation">(</span>geom<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">-- Insert some data</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> places<span class="token punctuation">(</span>name<span class="token punctuation">,</span> geom<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'Portland'</span><span class="token punctuation">,</span>  ST_GeomFromText<span class="token punctuation">(</span><span class="token string">'POINT(-122.6795 45.52054)'</span><span class="token punctuation">,</span> <span class="token number">4326</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> places<span class="token punctuation">(</span>name<span class="token punctuation">,</span> geom<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'Vancouver'</span><span class="token punctuation">,</span> ST_SetSRID<span class="token punctuation">(</span>ST_MakePoint<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">123.1207</span><span class="token punctuation">,</span> <span class="token number">49.2827</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">4326</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> places<span class="token punctuation">(</span>name<span class="token punctuation">,</span> geom<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'Seattle'</span><span class="token punctuation">,</span> ST_SetSRID<span class="token punctuation">(</span>ST_MakePoint<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">122.33551</span><span class="token punctuation">,</span> <span class="token number">47.604311</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">4326</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> places<span class="token punctuation">(</span>name<span class="token punctuation">,</span> geom<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'San Francisco'</span><span class="token punctuation">,</span> ST_SetSRID<span class="token punctuation">(</span>ST_MakePoint<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">122.416534</span><span class="token punctuation">,</span> <span class="token number">37.771800273</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">4326</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> places<span class="token punctuation">(</span>name<span class="token punctuation">,</span> geom<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'Ottawa'</span><span class="token punctuation">,</span> ST_SetSRID<span class="token punctuation">(</span>ST_MakePoint<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">75.697174</span><span class="token punctuation">,</span> <span class="token number">45.42062</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">4326</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">-- Get data </span>
<span class="token keyword">SELECT</span>  id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> ST_AsText<span class="token punctuation">(</span>geom<span class="token punctuation">)</span> <span class="token keyword">FROM</span> places<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span>  id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> ST_AsGeoJSON<span class="token punctuation">(</span>geom<span class="token punctuation">)</span> <span class="token keyword">FROM</span> places<span class="token punctuation">;</span>


<span class="token comment">-- Distances</span>
<span class="token keyword">SELECT</span> name<span class="token punctuation">,</span>
ST_DistanceSpheroid<span class="token punctuation">(</span>
  geom<span class="token punctuation">,</span> 
  ST_SetSRID<span class="token punctuation">(</span>ST_MakePoint<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">73.6049652</span><span class="token punctuation">,</span> <span class="token number">45.503459</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">4326</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">'SPHEROID["WGS84",6378137,298.257223563]'</span>
<span class="token punctuation">)</span> <span class="token keyword">FROM</span> places<span class="token punctuation">;</span>   

<span class="token keyword">SELECT</span> name <span class="token keyword">FROM</span> places
<span class="token keyword">WHERE</span> ST_DistanceSpheroid<span class="token punctuation">(</span>
  geom<span class="token punctuation">,</span> 
  ST_SetSRID<span class="token punctuation">(</span>ST_MakePoint<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">73.6049652</span><span class="token punctuation">,</span> <span class="token number">45.503459</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">4326</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">-- montreal</span>
  <span class="token string">'SPHEROID["WGS84",6378137,298.257223563]'</span>
<span class="token punctuation">)</span> <span class="token operator">&#x3C;</span> <span class="token number">500000</span><span class="token punctuation">;</span>   


<span class="token comment">-- Tansform projections</span>
ST_Transform<span class="token punctuation">(</span>ST_GeomFromText<span class="token punctuation">(</span><span class="token string">'POINT(120.08 30.96)'</span><span class="token punctuation">,</span> <span class="token number">4326</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2163</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">-- Points in polygon</span>
<span class="token keyword">SELECT</span>  <span class="token operator">*</span><span class="token punctuation">,</span> ST_AsText<span class="token punctuation">(</span>geom<span class="token punctuation">)</span>  <span class="token keyword">FROM</span> places <span class="token keyword">WHERE</span> ST_CONTAINS<span class="token punctuation">(</span>
  ST_SetSRID<span class="token punctuation">(</span>
    ST_GeomFromText<span class="token punctuation">(</span><span class="token string">'POLYGON(( -125.903320 44.668, -119.22 44.668, -119.22 50.2612, -125.903320 50.2612, -125.903320 44.668))'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token number">4326</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
  geom
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
</div></div></article></div></main></div><footer class="bg-accent-1 border-t border-accent-2"><div class="container mx-auto px-5"><div class="py-28 flex flex-col lg:flex-row items-center"><div class="flex flex-col lg:flex-row justify-center items-center lg:pl-4 lg:w-1/2"><a href="/">Learn something else</a></div></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Databases","slug":"databases","content":"\u003ch1\u003eDatabases\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e[x] MySQL + baked in spatial functions\u003c/li\u003e\n\u003cli\u003e[x] PostgreSQL + PostGIS\u003c/li\u003e\n\u003cli\u003e[ ] SQLite + SpatiaLite\u003c/li\u003e\n\u003cli\u003e[ ] DynamoDB\u003c/li\u003e\n\u003cli\u003e[ ] Firebase\u003c/li\u003e\n\u003cli\u003e[ ] MongoDB\u003c/li\u003e\n\u003cli\u003e[ ] CouchDB\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003eMySQL\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eBasic Docker stuff\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e\u003cspan class=\"token comment\"\u003e# show all running containers\u003c/span\u003e\n$ docker \u003cspan class=\"token function\"\u003eps\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e# Show all stoped containers\u003c/span\u003e\n$ docker \u003cspan class=\"token function\"\u003eps\u003c/span\u003e -a\n\n\u003cspan class=\"token comment\"\u003e# Pull the latest image\u003c/span\u003e\n$ docker pull mysql/mysql-server:latest\n\n\u003cspan class=\"token comment\"\u003e# Create \u0026#x26; run a container\u003c/span\u003e\n$ docker run --name some-mysql -p \u003cspan class=\"token number\"\u003e3306\u003c/span\u003e:3306  -e \u003cspan class=\"token assign-left variable\"\u003eMYSQL_ROOT_PASSWORD\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token number\"\u003e123456789\u003c/span\u003e -d mysql\n\n\u003cspan class=\"token comment\"\u003e# stop/start\u003c/span\u003e\n$ docker stop some-mysql\n$ docker start some-mysql\n\n\n\u003cspan class=\"token comment\"\u003e# Docker cleanups\u003c/span\u003e\n$ docker system prune\n$ docker image prune\n\n\u003cspan class=\"token comment\"\u003e# Create a database dump\u003c/span\u003e\n$ docker \u003cspan class=\"token builtin class-name\"\u003eexec\u003c/span\u003e some-mysql \u003cspan class=\"token function\"\u003esh\u003c/span\u003e -c \u003cspan class=\"token string\"\u003e'exec mysqldump --all-databases -uroot -p\"\u003cspan class=\"token variable\"\u003e$MYSQL_ROOT_PASSWORD\u003c/span\u003e\"'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e /some/path/on/your/host/all-databases.sql\n\n\u003cspan class=\"token comment\"\u003e# Restoring data from a dump file\u003c/span\u003e\n$ docker \u003cspan class=\"token builtin class-name\"\u003eexec\u003c/span\u003e -i some-mysql \u003cspan class=\"token function\"\u003esh\u003c/span\u003e -c \u003cspan class=\"token string\"\u003e'exec mysql -uroot -p\"\u003cspan class=\"token variable\"\u003e$MYSQL_ROOT_PASSWORD\u003c/span\u003e\"'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e /some/path/on/your/host/all-databases.sql\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eConnecting to your Database (MySQL v8)\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eFirst spin up a docker container\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e\u003cspan class=\"token comment\"\u003e# Pull the latest image\u003c/span\u003e\n$ docker pull mysql/mysql-server:latest\n\n\u003cspan class=\"token comment\"\u003e# Create \u0026#x26; run a container\u003c/span\u003e\n$ docker run --name some-mysql -p \u003cspan class=\"token number\"\u003e3306\u003c/span\u003e:3306 -p \u003cspan class=\"token number\"\u003e33060\u003c/span\u003e:33060  -e \u003cspan class=\"token assign-left variable\"\u003eMYSQL_ROOT_PASSWORD\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token number\"\u003e123456789\u003c/span\u003e -d mysql\n$ docker \u003cspan class=\"token builtin class-name\"\u003eexec\u003c/span\u003e -it some-mysql mysql -uroot -p\nmysql\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e CREATE DATABASE letsgetspatial\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eConnecting to the \u003ccode\u003eMySQL v8\u003c/code\u003e Database with \u003ca href=\"https://marketplace.visualstudio.com/items?itemName=mtxr.sqltools\"\u003e\u003ccode\u003eSQLTools\u003c/code\u003e extension\u003c/a\u003e. You will also have to download the Extensions drivers: MySQL\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cem\u003eNOTE\u003c/em\u003e we had to make a database \u003ccode\u003eletsgetspatial\u003c/code\u003e manually above\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-json\"\u003e\u003ccode class=\"language-json\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\"mysqlOptions\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"authProtocol\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"xprotocol\"\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\"previewLimit\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e50\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\"server\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"localhost\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\"port\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e33060\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\"driver\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"MySQL\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"MySQL_v8\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\"database\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"letsgetspatial\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\"username\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"root\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\"password\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"123456789\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\"connectionTimeout\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e15\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003eClick the \u003ccode\u003eTest Connection\u003c/code\u003e (it kinda appears like a white rectanglar button)\u003c/li\u003e\n\u003cli\u003eUnder the \u003ccode\u003eConnection\u003c/code\u003e section in the side panel click this \u003ccode\u003esome-mysql\u003c/code\u003e connection and it will open up a sql window where you can write queries\u003c/li\u003e\n\u003cli\u003eUse \u003ccode\u003e--\u003c/code\u003e to write comments \u0026#x26; \u003ccode\u003e-- @block\u003c/code\u003e to write blocks that you can execute only the block\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eBacking up data\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e\u003cspan class=\"token comment\"\u003e# Create a database dump\u003c/span\u003e\n$ docker \u003cspan class=\"token builtin class-name\"\u003eexec\u003c/span\u003e some-mysql \u003cspan class=\"token function\"\u003esh\u003c/span\u003e -c \u003cspan class=\"token string\"\u003e'exec mysqldump --all-databases -uroot -p\"\u003cspan class=\"token variable\"\u003e$MYSQL_ROOT_PASSWORD\u003c/span\u003e\"'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e /some/path/on/your/host/all-databases.sql\n\n\u003cspan class=\"token comment\"\u003e# Restoring data from a dump file\u003c/span\u003e\n$ docker \u003cspan class=\"token builtin class-name\"\u003eexec\u003c/span\u003e -i some-mysql \u003cspan class=\"token function\"\u003esh\u003c/span\u003e -c \u003cspan class=\"token string\"\u003e'exec mysql -uroot -p\"\u003cspan class=\"token variable\"\u003e$MYSQL_ROOT_PASSWORD\u003c/span\u003e\"'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e /some/path/on/your/host/all-databases.sql\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eDocker Compose way\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eWhere gonna use \u003ccode\u003edocker-compose\u003c/code\u003e to make our lives easier\n\u003cul\u003e\n\u003cli\u003eCreate a \u003ccode\u003edocker-compose.yml\u003c/code\u003e files with:\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-yml\"\u003e\u003ccode class=\"language-yml\"\u003e\u003cspan class=\"token key atrule\"\u003eversion\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'3.3'\u003c/span\u003e\n\u003cspan class=\"token key atrule\"\u003eservices\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"token key atrule\"\u003edb\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token key atrule\"\u003eimage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e mysql\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003elatest\n    \u003cspan class=\"token key atrule\"\u003erestart\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e always\n    \u003cspan class=\"token key atrule\"\u003eenvironment\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"token key atrule\"\u003eMYSQL_DATABASE\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'letsgetspatial'\u003c/span\u003e\n      \u003cspan class=\"token comment\"\u003e# So you don't have to use root, but you can if you like\u003c/span\u003e\n      \u003cspan class=\"token key atrule\"\u003eMYSQL_USER\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'user'\u003c/span\u003e\n      \u003cspan class=\"token comment\"\u003e# You can use whatever password you like\u003c/span\u003e\n      \u003cspan class=\"token key atrule\"\u003eMYSQL_PASSWORD\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'password'\u003c/span\u003e\n      \u003cspan class=\"token comment\"\u003e# Password for root access\u003c/span\u003e\n      \u003cspan class=\"token key atrule\"\u003eMYSQL_ROOT_PASSWORD\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'password'\u003c/span\u003e\n    \u003cspan class=\"token key atrule\"\u003eports\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"token comment\"\u003e# \u0026#x3C;Port exposed\u003e : \u0026#x3C; MySQL Port running inside container\u003e\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003e \u003cspan class=\"token string\"\u003e'3306:3306'\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003e \u003cspan class=\"token string\"\u003e'33060:33060'\u003c/span\u003e\n    \u003cspan class=\"token key atrule\"\u003eexpose\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"token comment\"\u003e# Opens port 3306 on the container\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003e \u003cspan class=\"token string\"\u003e'3306'\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003e \u003cspan class=\"token string\"\u003e'33060'\u003c/span\u003e\n      \u003cspan class=\"token comment\"\u003e# Where our data will be persisted\u003c/span\u003e\n    \u003cspan class=\"token key atrule\"\u003evolumes\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003e my\u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003edb\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e/var/lib/mysql\n      \n  \u003cspan class=\"token comment\"\u003e# http://localhost:8080/ to log into your DB\u003c/span\u003e\n  \u003cspan class=\"token key atrule\"\u003eadminer\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token key atrule\"\u003eimage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e adminer\n    \u003cspan class=\"token key atrule\"\u003erestart\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e always\n    \u003cspan class=\"token key atrule\"\u003eports\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003e 8080\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token number\"\u003e8080\u003c/span\u003e\n      \n\u003cspan class=\"token comment\"\u003e# Names our volume\u003c/span\u003e\n\u003cspan class=\"token key atrule\"\u003evolumes\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n  my\u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003edb\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003eNow we can run one command to get it all running:\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e\u003cspan class=\"token comment\"\u003e# build/run contains\u003c/span\u003e\n$ docker-compose up\n\n\u003cspan class=\"token comment\"\u003e# stop all containers (for ctl+c twice)\u003c/span\u003e\n$ docker-compose down\n\n\u003cspan class=\"token comment\"\u003e# Clean up everything\u003c/span\u003e\n$ docker-compose down -v --rmi all --remove-orphans\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eMySQL SQL Statements\u003c/h2\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-sql\"\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan class=\"token keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eTABLE\u003c/span\u003e Users\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  id \u003cspan class=\"token keyword\"\u003eINT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ePRIMARY\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eKEY\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eAUTO_INCREMENT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  email  \u003cspan class=\"token keyword\"\u003eVARCHAR\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e255\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003eNOT\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNULL\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eUNIQUE\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  bio \u003cspan class=\"token keyword\"\u003eTEXT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  country \u003cspan class=\"token keyword\"\u003eVARCHAR\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eINTO\u003c/span\u003e Users\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  email\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  bio\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  country\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \n\u003cspan class=\"token keyword\"\u003eVALUES\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  \u003cspan class=\"token string\"\u003e'hello@world.com'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token string\"\u003e'I love strangers'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token string\"\u003e'US'\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eFROM\u003c/span\u003e Users\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eTABLE\u003c/span\u003e Bookings\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  id \u003cspan class=\"token keyword\"\u003eINT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ePRIMARY\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eKEY\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eAUTO_INCREMENT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  guest_id \u003cspan class=\"token keyword\"\u003eINT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  room_id \u003cspan class=\"token keyword\"\u003eINT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  start_date \u003cspan class=\"token keyword\"\u003edatetime\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  end_date \u003cspan class=\"token keyword\"\u003edatetime\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  price \u003cspan class=\"token keyword\"\u003eint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  total \u003cspan class=\"token keyword\"\u003eint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  created_at \u003cspan class=\"token keyword\"\u003edatetime\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eTABLE\u003c/span\u003e Rooms\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  owner_id \u003cspan class=\"token keyword\"\u003eINT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  price \u003cspan class=\"token keyword\"\u003eINT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  hot_tub \u003cspan class=\"token keyword\"\u003eboolean\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  home_type \u003cspan class=\"token keyword\"\u003eVARCHAR\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e255\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  room_type \u003cspan class=\"token keyword\"\u003eVARCHAR\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e255\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  total_occupancy \u003cspan class=\"token keyword\"\u003eINT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  total_bedrooms \u003cspan class=\"token keyword\"\u003eINT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  total_bathrooms \u003cspan class=\"token keyword\"\u003eINT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  summary \u003cspan class=\"token keyword\"\u003eVARCHAR\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e255\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  created_at \u003cspan class=\"token keyword\"\u003edatetime\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  updated_at \u003cspan class=\"token keyword\"\u003edatetime\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  latitude \u003cspan class=\"token keyword\"\u003eFLOAT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  longitude \u003cspan class=\"token keyword\"\u003eFLOAT\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2\u003eMySQL with Spatial Data\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eMySQL \u003ccode\u003ePOINT(lng,lat)\u003c/code\u003e, just like PostGIS maintains (lng,lat), however... the \u003ccode\u003eST_GeomFromText\u003c/code\u003e like \u003ccode\u003eST_GeomFromText('POINT(45.5051 -122.6750)', 4326)\u003c/code\u003e DOES \u003ccode\u003eLAT/LNG\u003c/code\u003e??\u003c/strong\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThere is HUGE difference from MySQL v5.7 to v8.0\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ePrior to v8 spatial data there wasn't multiple spatial reference systems and geographic computations all computations were Catesian\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eSo what is the least you need to know about??\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eGIS libraries use \u003ca href=\"https://epsg.io/\"\u003eEPSG\u003c/a\u003e (EPSG actually stands for \u003ccode\u003eEuropean Petroleum Survey Group\u003c/code\u003e) codes as Spatial Reference System Identifiers (SRIDs)\u003c/li\u003e\n\u003cli\u003eAll you need to know when working with spatial data on the web is most maps use the Spatial Reference System of \u003ccode\u003e4326\u003c/code\u003e which is \u003ccode\u003eWGS 84 (Google Earth is in a Geographic coordinate system)\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eGeospatial data is should be stored in internal geometry format either \u003ccode\u003eWell-Known Text (WKT)\u003c/code\u003e or \u003ccode\u003eWell-Known Binary (WKB)\u003c/code\u003e format.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003ePoint(X,Y)\u003c/code\u003e is a constructor for numbers with precision and does not require converting first to text making it faster.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-sql\"\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan class=\"token comment\"\u003e-- Slower\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eINTO\u003c/span\u003e SOME_DB \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e coordinates\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eVALUES\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Portland\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ST_GeomFromText\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'POINT(45.5051 -122.6750)'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e4326\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e-- Faster\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eINTO\u003c/span\u003e SOME_DB \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e coordinates\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eVALUES\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Portland\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ST_SRID\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ePOINT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e122.6750\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e45.5051\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token number\"\u003e4326\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eLet's define some points instead of 2 columns lat/long\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-sql\"\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan class=\"token keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eTABLE\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003eplaces\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003eid\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e11\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eunsigned\u003c/span\u003e \u003cspan class=\"token operator\"\u003eNOT\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNULL\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eAUTO_INCREMENT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003e \u003cspan class=\"token keyword\"\u003evarchar\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e256\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eDEFAULT\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNULL\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003ecoordinates\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ePOINT\u003c/span\u003e SRID \u003cspan class=\"token number\"\u003e4326\u003c/span\u003e \u003cspan class=\"token operator\"\u003eNOT\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNULL\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003ePRIMARY\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eKEY\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003eid\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eLet's create an idex\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-sql\"\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan class=\"token keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eINDEX\u003c/span\u003e pt_idx \u003cspan class=\"token keyword\"\u003eON\u003c/span\u003e places\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecoordinates\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eNow let's add some points\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eNOTE\u003c/strong\u003e the \u003ccode\u003ePOINT(LNG, LAT)\u003c/code\u003e format\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-sql\"\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan class=\"token keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eINTO\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003eplaces\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003ecoordinates\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eVALUES\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Portland\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ST_SRID\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ePOINT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e122.6795\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e45.52054\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token number\"\u003e4326\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eINTO\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003eplaces\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003ecoordinates\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eVALUES\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Vancouver\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ST_SRID\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ePOINT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e123.1207\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e49.2827\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token number\"\u003e4326\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eINTO\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003eplaces\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003ecoordinates\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eVALUES\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Seattle\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ST_SRID\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ePOINT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e122.33551\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e47.604311\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token number\"\u003e4326\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eINTO\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003eplaces\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003ecoordinates\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eVALUES\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"San Francisco\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ST_SRID\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ePOINT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e122.416534\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e37.771800273\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token number\"\u003e4326\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eINTO\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003eplaces\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003ecoordinates\u003cspan class=\"token punctuation\"\u003e`\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eVALUES\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Ottawa\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ST_SRID\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ePOINT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e75.697174\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e45.42062\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token number\"\u003e4326\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eSelect Data\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-sql\"\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan class=\"token keyword\"\u003eSELECT\u003c/span\u003e  id\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ST_AsText\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecoordinates\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eFROM\u003c/span\u003e places\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eSELECT\u003c/span\u003e  id\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ST_AsGeoJSON\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecoordinates\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eFROM\u003c/span\u003e places\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eCalculate distances\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-sql\"\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan class=\"token comment\"\u003e-- Distance from the montreal\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eSELECT\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\nST_Distance_Sphere\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecoordinates\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ST_SRID\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ePOINT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e73.6049652\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e45.503459\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token number\"\u003e4326\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eFROM\u003c/span\u003e places\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e-- Distance less that 500Km (500000m) from the montreal \u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eSELECT\u003c/span\u003e name \u003cspan class=\"token keyword\"\u003eFROM\u003c/span\u003e places\n\u003cspan class=\"token keyword\"\u003eWHERE\u003c/span\u003e ST_Distance_Sphere\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecoordinates\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ST_SRID\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ePOINT\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e73.6049652\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e45.503459\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token number\"\u003e4326\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e \u003cspan class=\"token number\"\u003e500000\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eSelects all points in a polygon\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eIf you look closer, you’ll notice that the last point is the same as the first one and we have 5 points. This is because we need to “close” the polygon.\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-sql\"\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan class=\"token keyword\"\u003eSET\u003c/span\u003e \u003cspan class=\"token variable\"\u003e@polygon\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e ST_SRID\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  ST_GeomFromText\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'POLYGON(( -125.903320 44.668, -119.22 44.668, -119.22 50.2612, -125.903320 50.2612, -125.903320 44.668))'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token number\"\u003e4326\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eSELECT\u003c/span\u003e  \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ST_AsText\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecoordinates\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token keyword\"\u003eFROM\u003c/span\u003e places \u003cspan class=\"token keyword\"\u003eWHERE\u003c/span\u003e ST_CONTAINS\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e@polygon\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e coordinates\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eGet the result as GeoJson\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-sql\"\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan class=\"token keyword\"\u003eSET\u003c/span\u003e \u003cspan class=\"token variable\"\u003e@polygon\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e ST_SRID\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  ST_GeomFromText\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'POLYGON(( \u003c/span\u003e\n\u003cspan class=\"token string\"\u003e    -129.24316 43.16512263,\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e    -116.455078125 43.16512263,\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e    -116.455078125 52.24125614,\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e    -129.24316 52.24125614,\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e    -129.24316 43.165\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e  ))'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token number\"\u003e4326\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eSELECT\u003c/span\u003e json_merge\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  json_object\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"type\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"FeatureCollection\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  json_object\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"features\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \n    json_arrayagg\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n      json_merge\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n        json_object\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"type\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Feature\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n        json_object\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"properties\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e  \n          json_merge\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n            json_object\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'id'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e id\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n            json_object\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'name'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n          \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n        json_object\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'geometry'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ST_AsGeoJSON\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecoordinates\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \n  \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eFROM\u003c/span\u003e places \u003cspan class=\"token keyword\"\u003eWHERE\u003c/span\u003e ST_CONTAINS\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token variable\"\u003e@polygon\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e coordinates\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003ePostgres \u0026#x26; PostGIS\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eThe \u003ccode\u003epostgis/postgis\u003c/code\u003e image will have the following extensions installed:\n\u003cul\u003e\n\u003cli\u003epostgis\u003c/li\u003e\n\u003cli\u003epostgis_topology\u003c/li\u003e\n\u003cli\u003efuzzystrmatch\u003c/li\u003e\n\u003cli\u003epostgis_tiger_geocoder\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eDocker stuff\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eCreate a \u003ccode\u003edocker-compose.yml\u003c/code\u003e file\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-yml\"\u003e\u003ccode class=\"language-yml\"\u003e\u003cspan class=\"token key atrule\"\u003eversion\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"3.4\"\u003c/span\u003e\n\u003cspan class=\"token key atrule\"\u003eservices\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"token key atrule\"\u003epgAdmin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token key atrule\"\u003erestart\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e always\n    \u003cspan class=\"token key atrule\"\u003eimage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e dpage/pgadmin4\n    \u003cspan class=\"token key atrule\"\u003eports\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"8000:80\"\u003c/span\u003e\n    \u003cspan class=\"token key atrule\"\u003eenvironment\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"token key atrule\"\u003ePGADMIN_DEFAULT_EMAIL\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e 1234@admin.com\n      \u003cspan class=\"token key atrule\"\u003ePGADMIN_DEFAULT_PASSWORD\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1234\u003c/span\u003e\n    \u003cspan class=\"token key atrule\"\u003evolumes\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003e pgadmin\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e/var/lib/pgadmin\n  \u003cspan class=\"token key atrule\"\u003epostgis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token key atrule\"\u003erestart\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e always\n    \u003cspan class=\"token key atrule\"\u003eimage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e postgis/postgis\n    \u003cspan class=\"token key atrule\"\u003econtainer_name\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"postgis_container\"\u003c/span\u003e\n    \u003cspan class=\"token key atrule\"\u003eports\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"5432:5432\"\u003c/span\u003e\n    \u003cspan class=\"token key atrule\"\u003eenvironment\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"token key atrule\"\u003ePOSTGRES_USER\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e me\n      \u003cspan class=\"token key atrule\"\u003ePOSTGRES_PASSWORD\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1234\u003c/span\u003e\n      \u003cspan class=\"token key atrule\"\u003ePOSTGRES_DB\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e letsgetspatial\n    \u003cspan class=\"token key atrule\"\u003evolumes\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003e pgvol\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e/var/lib/postgresql/data\n\u003cspan class=\"token key atrule\"\u003evolumes\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"token key atrule\"\u003epgvol\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"token key atrule\"\u003epgadmin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003edocker-compose\u003c/code\u003e commands:\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e\u003cspan class=\"token comment\"\u003e# Stop these services\u003c/span\u003e\n$ docker-compose stop\n\n\u003cspan class=\"token comment\"\u003e# Start these services\u003c/span\u003e\n$ docker-compose start\n\n\u003cspan class=\"token comment\"\u003e# Delete these services\u003c/span\u003e\n$ docker-compose down\n\n\u003cspan class=\"token comment\"\u003e# Delete all docker volumes\u003c/span\u003e\n$ docker volume prune\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eThere are 2 ways to connect to the postgresdatabase server\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003ePSQL\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003eThe above \u003ccode\u003edocker-compose\u003c/code\u003e command spins up a container that has postgres/postgis/psql installed in the container\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e\u003cspan class=\"token comment\"\u003e# Connect into the container\u003c/span\u003e\n$ docker \u003cspan class=\"token builtin class-name\"\u003eexec\u003c/span\u003e -it postgis_container \u003cspan class=\"token function\"\u003ebash\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e# Connect into postgres inside your container\u003c/span\u003e\n$ psql -d letsgetspatial -U me\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003ePG Admin4\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003eThe \u003ccode\u003edocker-compose\u003c/code\u003e command also spins up a container for \u003ccode\u003epgadmin4\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eTo go to \u003ccode\u003epgadmin4\u003c/code\u003e go to \u003ccode\u003ehttp://localhost:8000/\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eUser name that has been defined in the \u003ccode\u003edocker-compose\u003c/code\u003e is: \u003ccode\u003e1234@admin.com\u003c/code\u003e, and the password is \u003ccode\u003e1234\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eHere you want to \u003ccode\u003eAdd new server\u003c/code\u003e Take the below JSON data to fill in the GUI\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-json\"\u003e\u003ccode class=\"language-json\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  generalTab\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"letsgetspatial-server\"\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  connectionTab\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"host\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"postgis\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"port\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"5432\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"user\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"me\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"password\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"1234\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"maintenaceDatabase\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"letsgetspatial\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003eYou talbles will live in \u003ccode\u003eletsgetspatial-server\u003c/code\u003e \u003e \u003ccode\u003eDatabases\u003c/code\u003e \u003e \u003ccode\u003eletsgetspatial\u003c/code\u003e \u003e \u003ccode\u003eSchemas\u003c/code\u003e \u003e \u003ccode\u003epublic\u003c/code\u003e \u003e \u003ccode\u003eTables\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003ePostgres commands\u003c/h2\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e\u003cspan class=\"token comment\"\u003e# List databases\u003c/span\u003e\n\u003cspan class=\"token assign-left variable\"\u003epostgres\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003e#  \u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003el\n\n\u003cspan class=\"token comment\"\u003e# Use or switch Databases\u003c/span\u003e\n\u003cspan class=\"token assign-left variable\"\u003epostgres\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003e# \u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003ec sales\n\n\u003cspan class=\"token comment\"\u003e# List tables\u003c/span\u003e\n\u003cspan class=\"token assign-left variable\"\u003epostgres\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003e# \u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003edt\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2\u003ePostgres/PostGIS Spatial Table\u003c/h2\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-sql\"\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan class=\"token keyword\"\u003eCREATE\u003c/span\u003e EXTENSION postgis\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eSELECT\u003c/span\u003e PostGIS_version\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e-- Create a table then add the spatial column\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eTABLE\u003c/span\u003e places \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  id \u003cspan class=\"token keyword\"\u003eint\u003c/span\u003e GENERATED \u003cspan class=\"token keyword\"\u003eBY\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eDEFAULT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eAS\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eIDENTITY\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ePRIMARY\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eKEY\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  name \u003cspan class=\"token keyword\"\u003etext\u003c/span\u003e \u003cspan class=\"token operator\"\u003eNOT\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNULL\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eSELECT\u003c/span\u003e AddGeometryColumn\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'places'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token string\"\u003e'geom'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token string\"\u003e'4326'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token string\"\u003e'POINT'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e-- Add a spatial index (to drop the index ...`DROP INDEX places_geom_idx;`)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eINDEX\u003c/span\u003e places_geom_idx \u003cspan class=\"token keyword\"\u003eON\u003c/span\u003e places \u003cspan class=\"token keyword\"\u003eUSING\u003c/span\u003e GIST \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egeom\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\n\u003cspan class=\"token comment\"\u003e-- Insert some data\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eINTO\u003c/span\u003e places\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e geom\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eVALUES\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'Portland'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e  ST_GeomFromText\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'POINT(-122.6795 45.52054)'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e4326\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eINTO\u003c/span\u003e places\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e geom\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eVALUES\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'Vancouver'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ST_SetSRID\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eST_MakePoint\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e123.1207\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e49.2827\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e4326\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eINTO\u003c/span\u003e places\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e geom\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eVALUES\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'Seattle'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ST_SetSRID\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eST_MakePoint\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e122.33551\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e47.604311\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token number\"\u003e4326\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eINTO\u003c/span\u003e places\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e geom\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eVALUES\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'San Francisco'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ST_SetSRID\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eST_MakePoint\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e122.416534\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e37.771800273\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token number\"\u003e4326\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eINTO\u003c/span\u003e places\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e geom\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eVALUES\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'Ottawa'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ST_SetSRID\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eST_MakePoint\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e75.697174\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e45.42062\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token number\"\u003e4326\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\n\u003cspan class=\"token comment\"\u003e-- Get data \u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eSELECT\u003c/span\u003e  id\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ST_AsText\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egeom\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eFROM\u003c/span\u003e places\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eSELECT\u003c/span\u003e  id\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ST_AsGeoJSON\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egeom\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eFROM\u003c/span\u003e places\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\n\u003cspan class=\"token comment\"\u003e-- Distances\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eSELECT\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\nST_DistanceSpheroid\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  geom\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \n  ST_SetSRID\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eST_MakePoint\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e73.6049652\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e45.503459\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token number\"\u003e4326\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token string\"\u003e'SPHEROID[\"WGS84\",6378137,298.257223563]'\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eFROM\u003c/span\u003e places\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e   \n\n\u003cspan class=\"token keyword\"\u003eSELECT\u003c/span\u003e name \u003cspan class=\"token keyword\"\u003eFROM\u003c/span\u003e places\n\u003cspan class=\"token keyword\"\u003eWHERE\u003c/span\u003e ST_DistanceSpheroid\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  geom\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \n  ST_SetSRID\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eST_MakePoint\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e73.6049652\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e45.503459\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003cspan class=\"token number\"\u003e4326\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token comment\"\u003e-- montreal\u003c/span\u003e\n  \u003cspan class=\"token string\"\u003e'SPHEROID[\"WGS84\",6378137,298.257223563]'\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e \u003cspan class=\"token number\"\u003e500000\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e   \n\n\n\u003cspan class=\"token comment\"\u003e-- Tansform projections\u003c/span\u003e\nST_Transform\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eST_GeomFromText\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'POINT(120.08 30.96)'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e4326\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2163\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\n\u003cspan class=\"token comment\"\u003e-- Points in polygon\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eSELECT\u003c/span\u003e  \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ST_AsText\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egeom\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token keyword\"\u003eFROM\u003c/span\u003e places \u003cspan class=\"token keyword\"\u003eWHERE\u003c/span\u003e ST_CONTAINS\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  ST_SetSRID\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n    ST_GeomFromText\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'POLYGON(( -125.903320 44.668, -119.22 44.668, -119.22 50.2612, -125.903320 50.2612, -125.903320 44.668))'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token number\"\u003e4326\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  geom\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n","ogImage":{"url":"/assets/blog/hello-world/cover.jpg"},"coverImage":"/assets/blog/hello-world/cover.jpg"}},"__N_SSG":true},"page":"/learn/[slug]","query":{"slug":"databases"},"buildId":"Q9L6exSVU8rOhNRllWXoy","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-eef578260fd80f8fff94.js"></script><script src="/_next/static/chunks/webpack-189c53927ffd3caf09c3.js" async=""></script><script src="/_next/static/chunks/framework-c5113a73163ba9a6512c.js" async=""></script><script src="/_next/static/chunks/main-71948af4b0f09c0fc30e.js" async=""></script><script src="/_next/static/chunks/pages/_app-099af13ebb345ee16499.js" async=""></script><script src="/_next/static/chunks/664-aaadba6b31e09bfd632a.js" async=""></script><script src="/_next/static/chunks/pages/learn/%5Bslug%5D-a0ede1caf55bb42d5ff9.js" async=""></script><script src="/_next/static/Q9L6exSVU8rOhNRllWXoy/_buildManifest.js" async=""></script><script src="/_next/static/Q9L6exSVU8rOhNRllWXoy/_ssgManifest.js" async=""></script></body></html>