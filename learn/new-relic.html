<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description" content="Not another learning site."/><meta property="og:image" content="https://og-image.now.sh/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><title>Not another learning site.</title><meta property="og:image" content="/assets/covers/newrelic.jpg"/><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/aadbdd3a744cb30b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/aadbdd3a744cb30b.css" data-n-g=""/><link rel="preload" href="/_next/static/css/cf121497002c184d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cf121497002c184d.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-9b312e20a4e32339.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-779b41245c009d2a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2c537fe628b325b3.js" defer=""></script><script src="/_next/static/chunks/664-4243e6d8b13d56da.js" defer=""></script><script src="/_next/static/chunks/pages/learn/%5Bslug%5D-92635154843eec70.js" defer=""></script><script src="/_next/static/IKxVgTS_xrs3knS_pCScR/_buildManifest.js" defer=""></script><script src="/_next/static/IKxVgTS_xrs3knS_pCScR/_ssgManifest.js" defer=""></script><script src="/_next/static/IKxVgTS_xrs3knS_pCScR/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="min-h-screen"><main><div class="container mx-auto px-5"><div style="position:fixed;background-color:rgba(255,255,255,0.9);backdrop-filter:blur(10px);width:100%;left:0px"><h2 class="text-2xl md:text-4xl font-bold tracking-tight md:tracking-tighter leading-tight mb-20 mt-8" style="padding:0;padding-left:10px;margin-bottom:20px"><a class="hover:underline" href="/">Learn</a>.</h2></div><article class="mb-32"><div style="height:100px"></div><h1 class="text-6xl md:text-7xl lg:text-8xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-left">new relic</h1><div class="mb-8 md:mb-16 sm:mx-0"><div class="sm:mx-0"><img src="/assets/covers/newrelic.jpg" alt="Cover Image for new relic" class="shadow-sm" layout="responsive" width="1240" height="620"/></div></div><div class="max-w-2xl mx-auto"><div class="block md:hidden mb-6"><div>TODO: add language chip here</div></div></div><div class="max-w-2xl mx-auto"><div class="markdown-styles_markdown__h_8de"><h1>Browser Application</h1>
<ul>
<li>You can create a New Relic <code>Browser Application</code> in the online GUI or you can do so via REST service</li>
</ul>
<h2>Manually add New Relic Browser Monitoring</h2>
<ul>
<li>View the documentation <a href="https://docs.newrelic.com/docs/browser/browser-monitoring/installation/install-browser-monitoring-agent/">here</a></li>
<li>Steps:
<ol>
<li>Go to one.newrelic.com, select Browser, and then select <code>Add more data</code> button.</li>
<li>Under the <code>Browser metrics</code> section click the <code>New Relic Browser</code> button.</li>
<li>Select the account &#x26; continue</li>
<li>Make sure you select the <code>Copy/Paste Javascript code</code> radio button</li>
<li>For step #3 select <code>No. (Name your standalone app)</code> and give you application a name</li>
<li>Generate some traffic for your app, then wait a few minutes for data to appear in New Relic.</li>
<li>Optional: After installation is complete and you are seeing data, go to the App settings page for additional agent configuration, or to change the browser agent type.</li>
</ol>
</li>
</ul>
<h2>Browser Application - via REST service</h2>
<ul>
<li><strong>When you add a browser app via API (v2), you can only instrument basic page load timing. To use instrumentation supporting all SPA features, <a href="https://docs.newrelic.com/docs/browser/single-page-app-monitoring/get-started/install-single-page-app-monitoring/">set up single page app monitoring via another method.</a></strong></li>
<li>So basically DON'T create a new New Relic Browser Monitoring app via the REST service</li>
<li>View the documentation <a href="https://docs.newrelic.com/docs/apis/rest-api-v2/browser-examples-v2/add-or-list-browser-apps-api-v2/">here</a></li>
<li>Create an API key by clicking on your avatar in the navbar > <code>API Keys</code> > <code>Create a Key</code></li>
<li>Create a new  <code>Browser Application</code>
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell">$ <span class="token function">curl</span> -X POST <span class="token string">'https://api.newrelic.com/v2/browser_applications.json'</span> <span class="token punctuation">\</span>
     -H <span class="token string">"X-Api-Key:<span class="token variable">${APIKEY}</span>"</span> -i <span class="token punctuation">\</span>
     -H <span class="token string">'Content-Type: application/json'</span> <span class="token punctuation">\</span>
     -d <span class="token punctuation">\</span>
<span class="token string">'{</span>
<span class="token string">  "browser_application": {</span>
<span class="token string">    "name": ${STRING}</span>
<span class="token string">  }</span>
<span class="token string">}'</span>
</code></pre></div>
</li>
<li>List all current browser applications
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell">$ <span class="token function">curl</span> -X GET <span class="token string">'https://api.newrelic.com/v2/browser_applications.json'</span> <span class="token punctuation">\</span>
     -H <span class="token string">"X-Api-Key:<span class="token variable">${APIKEY}</span>"</span> -i
</code></pre></div>
</li>
<li>View a specific browser app
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell">$ <span class="token function">curl</span> -X GET <span class="token string">'https://api.newrelic.com/v2/browser_applications.json'</span> <span class="token punctuation">\</span>
     -H <span class="token string">"X-Api-Key:<span class="token variable">${APIKEY}</span>"</span> -i <span class="token punctuation">\</span>
     -d <span class="token string">"filter[name]=<span class="token variable">${NAME}</span>"</span>
</code></pre></div>
</li>
<li>The REST service list each application's <code>id</code>, <code>name</code>, <code>browser_monitoring_key</code>, &#x26; <code>loader_script</code></li>
<li>The <code>loader_script</code> is the script tag you need to add to your project</li>
</ul>
<h1>Alert Policies</h1>
<ul>
<li>
<p>In New Relic <em>Alert Policy</em> is basically a folder containing multiple <em>contidions</em></p>
</li>
<li>
<p>The condition is basically <em>what</em> to monitor, <em>when</em> a condidtion is met, &#x26; <em>who</em> to notify</p>
</li>
<li>
<p>After creating 1/more conditions if one of those conditions are hit it will generate a violation, which will then create incidents</p>
</li>
<li>
<p>Incidents lifecycle: <em>open</em>, <em>acknowledged</em>, &#x26; <em>close</em></p>
</li>
<li>
<p>Creating NR Alerts and conditions manually:</p>
<ol>
<li>Create a <code>Alert Policy</code> aka <em>Alert Folder</em>:</li>
</ol>
<ul>
<li>Select the <code>tech-prd</code> account</li>
<li><code>Alerts &#x26; AI</code> > <code>Alert conditions (Policies)</code> > <code>+ New alert policy</code></li>
<li>Create alert policy</li>
<li>Alert policy name</li>
<li>Incident preference <code>By policy</code>, <code>By condition</code>, <code>By condition and signal</code></li>
</ul>
<ol start="2">
<li>Add condition(s)</li>
</ol>
<ul>
<li>Click the <code>Create a condition</code></li>
<li>Select a category: <code>Browser</code> > <code>Metric</code></li>
<li>Select an entity(s): <code>nike-cx/**</code></li>
<li>Select a threshold:
<ul>
<li><code>Apdex score</code> or <code>Page views with JS errors</code></li>
<li><code>10</code>% for at least <code>5</code> minutes</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Create <em>Alert Policy</em> &#x26; <em>Condition</em> with terraform:</p>
<div class="remark-highlight"><pre class="language-hcl"><code class="language-hcl"><span class="token keyword">terraform</span> <span class="token punctuation">{</span>
  <span class="token keyword">backend<span class="token type variable"> "s3" </span></span><span class="token punctuation">{</span>
    <span class="token property">key</span>    <span class="token punctuation">=</span> <span class="token string">"my-nr-alerts"</span>
    <span class="token property">region</span> <span class="token punctuation">=</span> <span class="token string">"us-west-2"</span>
  <span class="token punctuation">}</span>

  <span class="token property">required_version</span> <span class="token punctuation">=</span> <span class="token string">">= 0.13.5"</span>
  <span class="token keyword">required_providers</span> <span class="token punctuation">{</span>
    <span class="token property">aws</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span>
      <span class="token property">source</span>  <span class="token punctuation">=</span> <span class="token string">"hashicorp/aws"</span>
      <span class="token property">version</span> <span class="token punctuation">=</span> <span class="token string">"~>4.2.0"</span>
    <span class="token punctuation">}</span>
    <span class="token property">newrelic</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span>
      <span class="token property">source</span>  <span class="token punctuation">=</span> <span class="token string">"newrelic/newrelic"</span>
      <span class="token property">version</span> <span class="token punctuation">=</span> <span class="token string">"~> 2.37.0"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">provider<span class="token type variable"> "newrelic" </span></span><span class="token punctuation">{</span>
  <span class="token property">account_id</span> <span class="token punctuation">=</span> var.NR_ACCOUNT_ID
  <span class="token property">api_key</span>    <span class="token punctuation">=</span> var.NR_API_KEY_PROD
  <span class="token property">region</span>     <span class="token punctuation">=</span> <span class="token string">"US"</span> <span class="token comment"># Valid regions are US and EU</span>
<span class="token punctuation">}</span>

<span class="token comment">##################################################</span>
<span class="token comment"># Create Alert Policy &#x26; Condition</span>
<span class="token comment">##################################################</span>
<span class="token keyword">resource <span class="token type variable">"newrelic_alert_policy"</span></span> <span class="token string">"alert_policy"</span> <span class="token punctuation">{</span>
  <span class="token property">name</span> <span class="token punctuation">=</span> <span class="token string">"My Web App - Browser Policy"</span>
<span class="token punctuation">}</span>

<span class="token keyword">resource <span class="token type variable">"newrelic_nrql_alert_condition"</span></span> <span class="token string">"spike_of_10x"</span> <span class="token punctuation">{</span>
  <span class="token property">policy_id</span> <span class="token punctuation">=</span> newrelic_alert_policy.alert_policy.id
  <span class="token property">enabled</span>   <span class="token punctuation">=</span> var.enable_alerts

  <span class="token comment">##################################################</span>
  <span class="token comment"># Section: Enter condition name</span>
  <span class="token comment">##################################################</span>
  <span class="token property">name</span> <span class="token punctuation">=</span> <span class="token string">"10x error"</span>

  <span class="token comment">##################################################</span>
  <span class="token comment"># Section: Define your signal</span>
  <span class="token comment">##################################################</span>
  <span class="token keyword">nrql</span> <span class="token punctuation">{</span>
    <span class="token property">query</span> <span class="token punctuation">=</span> <span class="token string">"SELECT count(*) FROM JavaScriptError FACET errorClass WHERE appName = '<span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token type variable">nr_browser_monitor_app_name</span><span class="token punctuation">}</span></span>'"</span>
  <span class="token punctuation">}</span>
  <span class="token property">fill_value</span>  <span class="token punctuation">=</span> <span class="token number">1.0</span>
  <span class="token property">fill_option</span> <span class="token punctuation">=</span> <span class="token string">"static"</span> <span class="token comment"># Strategy to use when filling gaps in the signal.</span>


  <span class="token comment">##################################################</span>
  <span class="token comment"># Section: `Set your condition thresholds`</span>
  <span class="token comment">##################################################</span>
  <span class="token property">type</span> <span class="token punctuation">=</span> <span class="token string">"static"</span> <span class="token comment"># [static, baseline, outlier]</span>
  <span class="token property">value_function</span> <span class="token punctuation">=</span> <span class="token string">"sum"</span> <span class="token comment"># [single_value, sum] # `Open violation when the`  sum == `sum of query result is`</span>
  <span class="token property">aggregation_delay</span> <span class="token punctuation">=</span> <span class="token number">120</span>
  <span class="token comment"># expiration_duration            = 120    #  `Signal is lost after` </span>
  <span class="token comment"># close_violations_on_expiration = true   # `Close all current open violations`</span>
  <span class="token comment"># open_violation_on_expiration   = true   # `Open new "lost signal" violation`</span>

  <span class="token keyword">critical</span> <span class="token punctuation">{</span>
    <span class="token property">operator</span>              <span class="token punctuation">=</span> <span class="token string">"above"</span>
    <span class="token property">threshold</span>             <span class="token punctuation">=</span> <span class="token number">10</span>
    <span class="token property">threshold_duration</span>    <span class="token punctuation">=</span> <span class="token number">300</span> <span class="token comment"># 5 minutes</span>
    <span class="token property">threshold_occurrences</span> <span class="token punctuation">=</span> <span class="token string">"at_least_once"</span>
  <span class="token punctuation">}</span>

  <span class="token comment"># warning {</span>
  <span class="token comment">#   operator              = "above"</span>
  <span class="token comment">#   threshold             = 10</span>
  <span class="token comment">#   threshold_duration    = 600</span>
  <span class="token comment">#   threshold_occurrences = "ALL"</span>
  <span class="token comment"># }</span>

  <span class="token comment">##################################################</span>
  <span class="token comment"># Fine-tune advanced signal settings</span>
  <span class="token comment">##################################################</span>
  <span class="token property">aggregation_method</span> <span class="token punctuation">=</span> <span class="token string">"event_flow"</span> <span class="token comment"># `Streaming method` [cadence, event_flow, event_timer]</span>

  <span class="token comment">##################################################</span>
  <span class="token comment"># Section: Additional settings</span>
  <span class="token comment">##################################################</span>
  <span class="token property">violation_time_limit_seconds</span> <span class="token punctuation">=</span> <span class="token number">259200</span> <span class="token comment"># (3 days) `Close open violations after:` automatically force-close a long-lasting violation</span>
  <span class="token property">description</span>                  <span class="token punctuation">=</span> <span class="token string">"Alert when there is a 10x the account of JS errors for our client-side application"</span> <span class="token comment"># `Send a custom violation description`</span>
  <span class="token property">runbook_url</span>                  <span class="token punctuation">=</span> var.runbook_url
<span class="token punctuation">}</span>

<span class="token comment">#########################</span>
<span class="token comment"># Send out alerts</span>
<span class="token comment">#########################</span>
<span class="token comment"># Creates an email alert channel.</span>
<span class="token keyword">resource <span class="token type variable">"newrelic_alert_channel"</span></span> <span class="token string">"email_channel"</span> <span class="token punctuation">{</span>
  <span class="token property">name</span> <span class="token punctuation">=</span> <span class="token string">"CX - <span class="token interpolation"><span class="token punctuation">$</span><span class="token punctuation">{</span><span class="token keyword">var</span><span class="token punctuation">.</span><span class="token type variable">project_name</span><span class="token punctuation">}</span></span> - Browser Alert"</span>
  <span class="token property">type</span> <span class="token punctuation">=</span> <span class="token string">"email"</span>
  <span class="token keyword">config</span> <span class="token punctuation">{</span>
    <span class="token property">recipients</span>              <span class="token punctuation">=</span> <span class="token string">"phil.willis@gmail.com"</span>
    <span class="token property">include_json_attachment</span> <span class="token punctuation">=</span> <span class="token string">"true"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment"># Creates a Slack alert channel.</span>
<span class="token keyword">resource <span class="token type variable">"newrelic_alert_channel"</span></span> <span class="token string">"slack_channel"</span> <span class="token punctuation">{</span>
  <span class="token property">name</span> <span class="token punctuation">=</span> <span class="token string">"slack-channel-example"</span>
  <span class="token property">type</span> <span class="token punctuation">=</span> <span class="token string">"slack"</span>
  <span class="token keyword">config</span> <span class="token punctuation">{</span>
    <span class="token property">channel</span> <span class="token punctuation">=</span> <span class="token string">"#example-channel"</span>
    <span class="token property">url</span>     <span class="token punctuation">=</span> <span class="token string">"http://example-org.slack.com"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment"># Applies the created channels above to the alert policy</span>
<span class="token comment"># referenced at the top of the config.</span>
<span class="token keyword">resource <span class="token type variable">"newrelic_alert_policy_channel"</span></span> <span class="token string">"foo"</span> <span class="token punctuation">{</span>
  <span class="token property">policy_id</span>  <span class="token punctuation">=</span> newrelic_alert_policy.alert_policy.id
  <span class="token property">channel_ids</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span>
    newrelic_alert_channel.email_channel.id,
    newrelic_alert_channel.slack_channel.id
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div>
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell"><span class="token comment"># Make sure you have your AWS creds loaded</span>

<span class="token comment"># New Relic account/api-key</span>
<span class="token assign-left variable">NR_TECH_PRD_ACCOUNT_ID</span><span class="token operator">=</span><span class="token comment">#####</span>
<span class="token assign-left variable">NR_TECH_PRD_API_KEY_PROD</span><span class="token operator">=</span><span class="token string">"NRAK-##########################"</span> 

<span class="token comment"># AWS S3 bucket for TF remote state</span>
<span class="token assign-left variable">AWS_ACCOUNT_ID</span><span class="token operator">=</span><span class="token string">"##############"</span>
<span class="token assign-left variable">terraform_state_bucket</span><span class="token operator">=</span><span class="token string">"terraform-remote-config-<span class="token variable">$AWS_ACCOUNT_ID</span>"</span>

<span class="token comment"># Terraform stuff</span>
<span class="token function">pushd</span> terraform 
<span class="token function">rm</span> -rf .terraform/

<span class="token comment"># Init terraform with remote state file</span>
terraform init -backend-config <span class="token assign-left variable">bucket</span><span class="token operator">=</span><span class="token string">"<span class="token variable">${terraform_state_bucket}</span>"</span>

terraform apply <span class="token punctuation">\</span>
  -var<span class="token operator">=</span><span class="token string">"NR_ACCOUNT_ID=<span class="token variable">$NR_TECH_PRD_ACCOUNT_ID</span>"</span> <span class="token punctuation">\</span>
  -var<span class="token operator">=</span><span class="token string">"NR_API_KEY_PROD=<span class="token variable">$NR_TECH_PRD_API_KEY_PROD</span>"</span>

<span class="token function">popd</span>
</code></pre></div>
</li>
</ul>
</div></div></article></div></main></div><footer class="bg-accent-1 border-t border-accent-2"><div class="container mx-auto px-5"><div class="py-28 flex flex-col lg:flex-row items-center"><div class="flex flex-col lg:flex-row justify-center items-center lg:pl-4 lg:w-1/2"><a href="/">Learn something else</a></div></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"new relic","slug":"new-relic","content":"\u003ch1\u003eBrowser Application\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eYou can create a New Relic \u003ccode\u003eBrowser Application\u003c/code\u003e in the online GUI or you can do so via REST service\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eManually add New Relic Browser Monitoring\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eView the documentation \u003ca href=\"https://docs.newrelic.com/docs/browser/browser-monitoring/installation/install-browser-monitoring-agent/\"\u003ehere\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eSteps:\n\u003col\u003e\n\u003cli\u003eGo to one.newrelic.com, select Browser, and then select \u003ccode\u003eAdd more data\u003c/code\u003e button.\u003c/li\u003e\n\u003cli\u003eUnder the \u003ccode\u003eBrowser metrics\u003c/code\u003e section click the \u003ccode\u003eNew Relic Browser\u003c/code\u003e button.\u003c/li\u003e\n\u003cli\u003eSelect the account \u0026#x26; continue\u003c/li\u003e\n\u003cli\u003eMake sure you select the \u003ccode\u003eCopy/Paste Javascript code\u003c/code\u003e radio button\u003c/li\u003e\n\u003cli\u003eFor step #3 select \u003ccode\u003eNo. (Name your standalone app)\u003c/code\u003e and give you application a name\u003c/li\u003e\n\u003cli\u003eGenerate some traffic for your app, then wait a few minutes for data to appear in New Relic.\u003c/li\u003e\n\u003cli\u003eOptional: After installation is complete and you are seeing data, go to the App settings page for additional agent configuration, or to change the browser agent type.\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eBrowser Application - via REST service\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eWhen you add a browser app via API (v2), you can only instrument basic page load timing. To use instrumentation supporting all SPA features, \u003ca href=\"https://docs.newrelic.com/docs/browser/single-page-app-monitoring/get-started/install-single-page-app-monitoring/\"\u003eset up single page app monitoring via another method.\u003c/a\u003e\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003eSo basically DON'T create a new New Relic Browser Monitoring app via the REST service\u003c/li\u003e\n\u003cli\u003eView the documentation \u003ca href=\"https://docs.newrelic.com/docs/apis/rest-api-v2/browser-examples-v2/add-or-list-browser-apps-api-v2/\"\u003ehere\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eCreate an API key by clicking on your avatar in the navbar \u003e \u003ccode\u003eAPI Keys\u003c/code\u003e \u003e \u003ccode\u003eCreate a Key\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eCreate a new  \u003ccode\u003eBrowser Application\u003c/code\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e$ \u003cspan class=\"token function\"\u003ecurl\u003c/span\u003e -X POST \u003cspan class=\"token string\"\u003e'https://api.newrelic.com/v2/browser_applications.json'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003e\n     -H \u003cspan class=\"token string\"\u003e\"X-Api-Key:\u003cspan class=\"token variable\"\u003e${APIKEY}\u003c/span\u003e\"\u003c/span\u003e -i \u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003e\n     -H \u003cspan class=\"token string\"\u003e'Content-Type: application/json'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003e\n     -d \u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e'{\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e  \"browser_application\": {\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e    \"name\": ${STRING}\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e  }\u003c/span\u003e\n\u003cspan class=\"token string\"\u003e}'\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003eList all current browser applications\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e$ \u003cspan class=\"token function\"\u003ecurl\u003c/span\u003e -X GET \u003cspan class=\"token string\"\u003e'https://api.newrelic.com/v2/browser_applications.json'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003e\n     -H \u003cspan class=\"token string\"\u003e\"X-Api-Key:\u003cspan class=\"token variable\"\u003e${APIKEY}\u003c/span\u003e\"\u003c/span\u003e -i\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003eView a specific browser app\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e$ \u003cspan class=\"token function\"\u003ecurl\u003c/span\u003e -X GET \u003cspan class=\"token string\"\u003e'https://api.newrelic.com/v2/browser_applications.json'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003e\n     -H \u003cspan class=\"token string\"\u003e\"X-Api-Key:\u003cspan class=\"token variable\"\u003e${APIKEY}\u003c/span\u003e\"\u003c/span\u003e -i \u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003e\n     -d \u003cspan class=\"token string\"\u003e\"filter[name]=\u003cspan class=\"token variable\"\u003e${NAME}\u003c/span\u003e\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003eThe REST service list each application's \u003ccode\u003eid\u003c/code\u003e, \u003ccode\u003ename\u003c/code\u003e, \u003ccode\u003ebrowser_monitoring_key\u003c/code\u003e, \u0026#x26; \u003ccode\u003eloader_script\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eThe \u003ccode\u003eloader_script\u003c/code\u003e is the script tag you need to add to your project\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003eAlert Policies\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eIn New Relic \u003cem\u003eAlert Policy\u003c/em\u003e is basically a folder containing multiple \u003cem\u003econtidions\u003c/em\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe condition is basically \u003cem\u003ewhat\u003c/em\u003e to monitor, \u003cem\u003ewhen\u003c/em\u003e a condidtion is met, \u0026#x26; \u003cem\u003ewho\u003c/em\u003e to notify\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eAfter creating 1/more conditions if one of those conditions are hit it will generate a violation, which will then create incidents\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eIncidents lifecycle: \u003cem\u003eopen\u003c/em\u003e, \u003cem\u003eacknowledged\u003c/em\u003e, \u0026#x26; \u003cem\u003eclose\u003c/em\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eCreating NR Alerts and conditions manually:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eCreate a \u003ccode\u003eAlert Policy\u003c/code\u003e aka \u003cem\u003eAlert Folder\u003c/em\u003e:\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003eSelect the \u003ccode\u003etech-prd\u003c/code\u003e account\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eAlerts \u0026#x26; AI\u003c/code\u003e \u003e \u003ccode\u003eAlert conditions (Policies)\u003c/code\u003e \u003e \u003ccode\u003e+ New alert policy\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eCreate alert policy\u003c/li\u003e\n\u003cli\u003eAlert policy name\u003c/li\u003e\n\u003cli\u003eIncident preference \u003ccode\u003eBy policy\u003c/code\u003e, \u003ccode\u003eBy condition\u003c/code\u003e, \u003ccode\u003eBy condition and signal\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003eAdd condition(s)\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003eClick the \u003ccode\u003eCreate a condition\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eSelect a category: \u003ccode\u003eBrowser\u003c/code\u003e \u003e \u003ccode\u003eMetric\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eSelect an entity(s): \u003ccode\u003enike-cx/**\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eSelect a threshold:\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eApdex score\u003c/code\u003e or \u003ccode\u003ePage views with JS errors\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e10\u003c/code\u003e% for at least \u003ccode\u003e5\u003c/code\u003e minutes\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eCreate \u003cem\u003eAlert Policy\u003c/em\u003e \u0026#x26; \u003cem\u003eCondition\u003c/em\u003e with terraform:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-hcl\"\u003e\u003ccode class=\"language-hcl\"\u003e\u003cspan class=\"token keyword\"\u003eterraform\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003ebackend\u003cspan class=\"token type variable\"\u003e \"s3\" \u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003ekey\u003c/span\u003e    \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"my-nr-alerts\"\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003eregion\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"us-west-2\"\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"token property\"\u003erequired_version\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u003e= 0.13.5\"\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003erequired_providers\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003eaws\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token property\"\u003esource\u003c/span\u003e  \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"hashicorp/aws\"\u003c/span\u003e\n      \u003cspan class=\"token property\"\u003eversion\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"~\u003e4.2.0\"\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003enewrelic\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token property\"\u003esource\u003c/span\u003e  \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"newrelic/newrelic\"\u003c/span\u003e\n      \u003cspan class=\"token property\"\u003eversion\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"~\u003e 2.37.0\"\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eprovider\u003cspan class=\"token type variable\"\u003e \"newrelic\" \u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003eaccount_id\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e var.NR_ACCOUNT_ID\n  \u003cspan class=\"token property\"\u003eapi_key\u003c/span\u003e    \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e var.NR_API_KEY_PROD\n  \u003cspan class=\"token property\"\u003eregion\u003c/span\u003e     \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"US\"\u003c/span\u003e \u003cspan class=\"token comment\"\u003e# Valid regions are US and EU\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e##################################################\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e# Create Alert Policy \u0026#x26; Condition\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e##################################################\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eresource \u003cspan class=\"token type variable\"\u003e\"newrelic_alert_policy\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"alert_policy\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003ename\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"My Web App - Browser Policy\"\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eresource \u003cspan class=\"token type variable\"\u003e\"newrelic_nrql_alert_condition\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"spike_of_10x\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003epolicy_id\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e newrelic_alert_policy.alert_policy.id\n  \u003cspan class=\"token property\"\u003eenabled\u003c/span\u003e   \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e var.enable_alerts\n\n  \u003cspan class=\"token comment\"\u003e##################################################\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e# Section: Enter condition name\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e##################################################\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003ename\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"10x error\"\u003c/span\u003e\n\n  \u003cspan class=\"token comment\"\u003e##################################################\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e# Section: Define your signal\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e##################################################\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003enrql\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003equery\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"SELECT count(*) FROM JavaScriptError FACET errorClass WHERE appName = '\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e$\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token type variable\"\u003enr_browser_monitor_app_name\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e'\"\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003efill_value\u003c/span\u003e  \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1.0\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003efill_option\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"static\"\u003c/span\u003e \u003cspan class=\"token comment\"\u003e# Strategy to use when filling gaps in the signal.\u003c/span\u003e\n\n\n  \u003cspan class=\"token comment\"\u003e##################################################\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e# Section: `Set your condition thresholds`\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e##################################################\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003etype\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"static\"\u003c/span\u003e \u003cspan class=\"token comment\"\u003e# [static, baseline, outlier]\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003evalue_function\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"sum\"\u003c/span\u003e \u003cspan class=\"token comment\"\u003e# [single_value, sum] # `Open violation when the`  sum == `sum of query result is`\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003eaggregation_delay\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e120\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e# expiration_duration            = 120    #  `Signal is lost after` \u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e# close_violations_on_expiration = true   # `Close all current open violations`\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e# open_violation_on_expiration   = true   # `Open new \"lost signal\" violation`\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003ecritical\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003eoperator\u003c/span\u003e              \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"above\"\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003ethreshold\u003c/span\u003e             \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e10\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003ethreshold_duration\u003c/span\u003e    \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e300\u003c/span\u003e \u003cspan class=\"token comment\"\u003e# 5 minutes\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003ethreshold_occurrences\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"at_least_once\"\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"token comment\"\u003e# warning {\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e#   operator              = \"above\"\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e#   threshold             = 10\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e#   threshold_duration    = 600\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e#   threshold_occurrences = \"ALL\"\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e# }\u003c/span\u003e\n\n  \u003cspan class=\"token comment\"\u003e##################################################\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e# Fine-tune advanced signal settings\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e##################################################\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003eaggregation_method\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"event_flow\"\u003c/span\u003e \u003cspan class=\"token comment\"\u003e# `Streaming method` [cadence, event_flow, event_timer]\u003c/span\u003e\n\n  \u003cspan class=\"token comment\"\u003e##################################################\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e# Section: Additional settings\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e##################################################\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003eviolation_time_limit_seconds\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e259200\u003c/span\u003e \u003cspan class=\"token comment\"\u003e# (3 days) `Close open violations after:` automatically force-close a long-lasting violation\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003edescription\u003c/span\u003e                  \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Alert when there is a 10x the account of JS errors for our client-side application\"\u003c/span\u003e \u003cspan class=\"token comment\"\u003e# `Send a custom violation description`\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003erunbook_url\u003c/span\u003e                  \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e var.runbook_url\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e#########################\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e# Send out alerts\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e#########################\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e# Creates an email alert channel.\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eresource \u003cspan class=\"token type variable\"\u003e\"newrelic_alert_channel\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"email_channel\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003ename\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"CX - \u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e$\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token type variable\"\u003eproject_name\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e - Browser Alert\"\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003etype\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"email\"\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econfig\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003erecipients\u003c/span\u003e              \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"phil.willis@gmail.com\"\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003einclude_json_attachment\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"true\"\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e# Creates a Slack alert channel.\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eresource \u003cspan class=\"token type variable\"\u003e\"newrelic_alert_channel\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"slack_channel\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003ename\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"slack-channel-example\"\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003etype\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"slack\"\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econfig\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003echannel\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"#example-channel\"\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003eurl\u003c/span\u003e     \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"http://example-org.slack.com\"\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e# Applies the created channels above to the alert policy\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e# referenced at the top of the config.\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eresource \u003cspan class=\"token type variable\"\u003e\"newrelic_alert_policy_channel\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"foo\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003epolicy_id\u003c/span\u003e  \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e newrelic_alert_policy.alert_policy.id\n  \u003cspan class=\"token property\"\u003echannel_ids\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\n    newrelic_alert_channel.email_channel.id,\n    newrelic_alert_channel.slack_channel.id\n  \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e\u003cspan class=\"token comment\"\u003e# Make sure you have your AWS creds loaded\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e# New Relic account/api-key\u003c/span\u003e\n\u003cspan class=\"token assign-left variable\"\u003eNR_TECH_PRD_ACCOUNT_ID\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token comment\"\u003e#####\u003c/span\u003e\n\u003cspan class=\"token assign-left variable\"\u003eNR_TECH_PRD_API_KEY_PROD\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"NRAK-##########################\"\u003c/span\u003e \n\n\u003cspan class=\"token comment\"\u003e# AWS S3 bucket for TF remote state\u003c/span\u003e\n\u003cspan class=\"token assign-left variable\"\u003eAWS_ACCOUNT_ID\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"##############\"\u003c/span\u003e\n\u003cspan class=\"token assign-left variable\"\u003eterraform_state_bucket\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"terraform-remote-config-\u003cspan class=\"token variable\"\u003e$AWS_ACCOUNT_ID\u003c/span\u003e\"\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e# Terraform stuff\u003c/span\u003e\n\u003cspan class=\"token function\"\u003epushd\u003c/span\u003e terraform \n\u003cspan class=\"token function\"\u003erm\u003c/span\u003e -rf .terraform/\n\n\u003cspan class=\"token comment\"\u003e# Init terraform with remote state file\u003c/span\u003e\nterraform init -backend-config \u003cspan class=\"token assign-left variable\"\u003ebucket\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003cspan class=\"token variable\"\u003e${terraform_state_bucket}\u003c/span\u003e\"\u003c/span\u003e\n\nterraform apply \u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003e\n  -var\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"NR_ACCOUNT_ID=\u003cspan class=\"token variable\"\u003e$NR_TECH_PRD_ACCOUNT_ID\u003c/span\u003e\"\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e\\\u003c/span\u003e\n  -var\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"NR_API_KEY_PROD=\u003cspan class=\"token variable\"\u003e$NR_TECH_PRD_API_KEY_PROD\u003c/span\u003e\"\u003c/span\u003e\n\n\u003cspan class=\"token function\"\u003epopd\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n","ogImage":{"url":"/assets/covers/newrelic.jpg"},"coverImage":"/assets/covers/newrelic.jpg"}},"__N_SSG":true},"page":"/learn/[slug]","query":{"slug":"new-relic"},"buildId":"IKxVgTS_xrs3knS_pCScR","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>