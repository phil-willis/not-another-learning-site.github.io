<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description" content="Not another learning site."/><meta property="og:image" content="https://og-image.now.sh/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><title>Not another learning site.</title><meta property="og:image" content="/assets/covers/firebase.jpg"/><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/4c30c795e0db217f7cd8.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4c30c795e0db217f7cd8.css" data-n-g=""/><link rel="preload" href="/_next/static/css/6f4272a048091359c753.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6f4272a048091359c753.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-189c53927ffd3caf09c3.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-c5113a73163ba9a6512c.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-71948af4b0f09c0fc30e.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-65342bae310ab86b4830.js" as="script"/><link rel="preload" href="/_next/static/chunks/664-aaadba6b31e09bfd632a.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/learn/%5Bslug%5D-696d4f00a359e13ae662.js" as="script"/></head><body><div id="__next"><div class="min-h-screen"><main><div class="container mx-auto px-5"><div style="position:fixed;background-color:rgba(255,255,255,0.9);backdrop-filter:blur(10px);width:100%;left:0px"><h2 class="text-2xl md:text-4xl font-bold tracking-tight md:tracking-tighter leading-tight mb-20 mt-8" style="padding:0;padding-left:10px;margin-bottom:20px"><a class="hover:underline" href="/">Learn</a>.</h2></div><article class="mb-32"><div style="height:100px"></div><h1 class="text-6xl md:text-7xl lg:text-8xl font-bold tracking-tighter leading-tight md:leading-none mb-12 text-center md:text-left">firebase</h1><div class="mb-8 md:mb-16 sm:mx-0"><div class="sm:mx-0"><img src="/assets/covers/firebase.jpg" alt="Cover Image for firebase" class="shadow-sm" layout="responsive" width="1240" height="620"/></div></div><div class="max-w-2xl mx-auto"><div class="block md:hidden mb-6"><div>TODO: add language chip here</div></div></div><div class="max-w-2xl mx-auto"><div class="markdown-styles_markdown__1x9gM"><h1>Overview of firebase</h1>
<ul>
<li><a href="https://firebase.google.com/docs/build">firebase docs</a>
<ul>
<li>Firebase allows you to:</li>
<li>authenticate users</li>
<li>Database</li>
<li>Server-side code via Functions</li>
<li>Security</li>
<li>Analytics</li>
<li>Scale</li>
</ul>
</li>
<li>A huge thing is you pay $0 until you app builds a decent user base</li>
<li>Opt in features DB, Storage, Serverless Functions,</li>
<li><code>Backend as a Service</code></li>
<li>Firebase is just an extension of Google Cloud Platform, at it's core Firebase is an SDK that makes it easy for your frontend app to back google cloud infrastructure</li>
<li>The console sidebar is divided into sections: <em>Build</em>, <em>Release &#x26; Monitor</em>, <em>Analytics</em>, &#x26; <em>Engage</em></li>
<li>Firebase is <code>opt-in</code></li>
<li>Firebase also has extenstions</li>
</ul>
<h1>Get Started</h1>
<ol>
<li>Go to <a href="https://console.firebase.google.com/">Firebase console</a> and log in with your gmail account</li>
<li>Create a Project</li>
<li>Install the node global packages</li>
</ol>
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell">$ <span class="token function">npm</span> <span class="token function">install</span> -g firebase-tools
</code></pre></div>
<ol start="4">
<li>You can initialize multiple firenase services or each seperatly (you can always add/remove very easily)</li>
</ol>
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell">$ firebase login
<span class="token comment"># this will open up your browser &#x26; ask you to authenticate</span>
$ firebase init
<span class="token comment"># ◉ Firestore: Configure security rules and indexes files for Firestore</span>
<span class="token comment"># ◉ Functions: Configure a Cloud Functions directory and its files</span>
<span class="token comment"># ◉ Hosting: Configure files for Firebase Hosting and (optionally) set up GitHub Action deploys</span>
<span class="token comment"># ◉ Hosting: Set up GitHub Action deploys</span>
<span class="token comment"># ◉ Storage: Configure a security rules file for Cloud Storage</span>
<span class="token comment"># ◉ Emulators: Set up local emulators for Firebase products</span>
</code></pre></div>
<ul>
<li>Firebase files
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell">├── .firebaserc
├── firebase.json
├── firebase/
│   └── firestore.indexes.json
│   └── firestore.rules
│   └── storage.rules
</code></pre></div>
</li>
</ul>
<ol start="5">
<li>If you are using VSCode you might want to install the <a href="https://marketplace.visualstudio.com/items?itemName=jsayol.firebase-explorer">Firebase Explorer extension</a></li>
</ol>
<h1>Web hosting</h1>
<ul>
<li>
<p>Hosting is where you web application will ultimately be deployed, it's a storage bucket that's available on the internet and served over a CDN make your web app really fast around the world</p>
</li>
<li>
<p>Pricing is based on the GB stored on your account + GB transfered out to your users (it's VERY generous)</p>
</li>
<li>
<p>Setup web hosting:</p>
<ol>
<li>Enable hoisting for you web application in the firebase console</li>
</ol>
<ul>
<li>Click the <code>Project Settings</code> gear icon in the side nav, under the <code>Your apps</code> click the <code>&#x3C;/></code> button to initiate a web application</li>
<li>Register an App</li>
<li>Check the <code>Also setup Firebase Hosting for this app</code></li>
<li>Copy the code snippet (This snippet is ok to be public, cause firebase does other stuff to secure it)
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> firebaseConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  apiKey<span class="token operator">:</span> <span class="token string">"wertyuiop"</span><span class="token punctuation">,</span>
  authDomain<span class="token operator">:</span> <span class="token string">"some-awesome-app.firebaseapp.com"</span><span class="token punctuation">,</span>
  projectId<span class="token operator">:</span> <span class="token string">"some-awesome-app"</span><span class="token punctuation">,</span>
  storageBucket<span class="token operator">:</span> <span class="token string">"some-awesome-app.appspot.com"</span><span class="token punctuation">,</span>
  messagingSenderId<span class="token operator">:</span> <span class="token string">"1234567890"</span><span class="token punctuation">,</span>
  appId<span class="token operator">:</span> <span class="token string">"1:12345678:web:12345678"</span><span class="token punctuation">,</span>
  measurementId<span class="token operator">:</span> <span class="token string">"G-QWERTYUIOP"</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div>
</li>
<li>Security in Firebase is done on the database side</li>
</ul>
<ol start="2">
<li>Initiallize hosting with firebase-tools</li>
</ol>
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell">$ firebase init hosting
</code></pre></div>
<ol start="3">
<li>Add emulator config</li>
</ol>
<ul>
<li>The above command will create a <code>firebase.json</code> &#x26; <code>.firebaserc</code> (resource config file just contains a project identifier for our project in the cloud), you want to add some configuration to the <code>firebase.json</code> to tell the firebase emulator what port to emulate the web hosting</li>
</ul>
<div class="remark-highlight"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
<span class="token property">"emulators"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"hosting"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"port"</span><span class="token operator">:</span> <span class="token number">5000</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<ol start="4">
<li>Run the emulator</li>
</ol>
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell">$ firebase emulators:start 
</code></pre></div>
</li>
<li>
<p>The <code>firebase.json</code> provides some information aout all the firebase services, in this case we are looking at <code>hosting</code></p>
</li>
<li>
<p>The <code>public</code> key points you your build version of the web application</p>
</li>
<li>
<p>The <code>rewrites</code> is what you want to add if you are planning on hosting a Single Page Application (aka web app with client side routing)</p>
</li>
<li>
<p>When a browser attempts to open a URL path that matches the specified source or regex URL pattern, the browser will be given the contents of the file at the destination URL instead. Specify URL rewrites by creating a rewrites attribute that contains an array of objects (called "rewrite rules").</p>
</li>
<li>
<p>The <code>emulator</code> key is for emulating firebase services, in this case we provide a port that we want to emulate what the <code>hosting.public</code> folder show. This is great cause you can test how firebase web hosting will look like for the production version locally. (don't have to deploy multiple times to the actual service to test a behavior)</p>
</li>
<li>
<p>Example of a <code>firebase.json</code> file:</p>
<div class="remark-highlight"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"hosting"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"public"</span><span class="token operator">:</span> <span class="token string">"build"</span><span class="token punctuation">,</span> <span class="token comment">// the only required attribute for Hosting</span>
    <span class="token property">"ignore"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
       <span class="token string">"firebase.json"</span><span class="token punctuation">,</span>  <span class="token comment">// the Firebase configuration file (the file described on this page)</span>
      <span class="token string">"**/.*"</span><span class="token punctuation">,</span>  <span class="token comment">// files with a leading period should be hidden from the system</span>
      <span class="token string">"**/node_modules/**"</span>  <span class="token comment">// contains dependencies used to create your site but not run it</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"rewrites"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">"source"</span><span class="token operator">:</span> <span class="token string">"**"</span><span class="token punctuation">,</span>
        <span class="token property">"destination"</span><span class="token operator">:</span> <span class="token string">"/index.html"</span> <span class="token comment">// For SPA web app (clientside routing)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"emulators"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"hosting"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"port"</span><span class="token operator">:</span> <span class="token number">5000</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
</li>
<li>
<p>You can also use the <code>rewrite rules</code> to trigger a firebase function</p>
<div class="remark-highlight"><pre class="language-json"><code class="language-json"><span class="token property">"hosting"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>

  <span class="token comment">// Directs all requests from the page `/bigben` to execute the `bigben` function</span>
  <span class="token property">"rewrites"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span>
    <span class="token property">"source"</span><span class="token operator">:</span> <span class="token string">"/trigger-some-function"</span><span class="token punctuation">,</span>
    <span class="token property">"function"</span><span class="token operator">:</span> <span class="token string">"someAwesomeFunction"</span>
  <span class="token punctuation">}</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div>
</li>
<li>
<p>Learn more about <a href="https://firebase.google.com/docs/hosting/full-config">configuring rewrites here</a></p>
</li>
<li>
<p>Example of a <code>.firebaserc</code>, the <code>project.default</code> name should match the one you made in the Firebase Console</p>
<div class="remark-highlight"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"projects"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"default"</span><span class="token operator">:</span> <span class="token string">"&#x3C;YOUR_PROJECT_NAME>"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
</li>
<li>
<p>Now you can run the hoisting emulator</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">$ firebase emulators:start --only hosting</code></pre></div>
</li>
<li>
<p>You can deploy your app:</p>
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell">$ firebase deploy --only hosting
</code></pre></div>
</li>
<li>
<p>You can also deploy your app with <a href="https://firebase.google.com/docs/hosting/github-integration">Github Actions</a></p>
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell">$ firebase init hosting
$ firebase init hosting:github
<span class="token comment"># Follow the CLI prompts, and the command will automatically take care of setting up the GitHub Action:</span>
</code></pre></div>
<ul>
<li>Example of a Github Actions files <code>.github/workflows/firebase-hosting-merge.yml</code>
<div class="remark-highlight"><pre class="language-yml"><code class="language-yml"><span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy to Firebase Hosting on merge
<span class="token key atrule">'on'</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> main
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build_and_deploy</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2
      <span class="token punctuation">-</span> <span class="token key atrule">run</span><span class="token punctuation">:</span> npm ci <span class="token important">&#x26;&#x26;</span> npm run build
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> FirebaseExtended/action<span class="token punctuation">-</span>hosting<span class="token punctuation">-</span>deploy@v0
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">repoToken</span><span class="token punctuation">:</span> <span class="token string">'${{ secrets.GITHUB_TOKEN }}'</span>
          <span class="token key atrule">firebaseServiceAccount</span><span class="token punctuation">:</span> <span class="token string">'${{ secrets.FIREBASE_SERVICE_ACCOUNT_PIN_THAT_EXAMPLE }}'</span>
          <span class="token key atrule">channelId</span><span class="token punctuation">:</span> live
          <span class="token key atrule">projectId</span><span class="token punctuation">:</span> pin<span class="token punctuation">-</span>that<span class="token punctuation">-</span>example
</code></pre></div>
</li>
</ul>
</li>
<li>
<p>In the Firebase Console, under the hosting tab you can also add a custom domain to your web app</p>
</li>
</ul>
<h1>Auth</h1>
<ul>
<li>
<p>The <code>Authentication</code> is kinda like a <em>read-only</em> database for your users</p>
</li>
<li>
<p>You can add users manually &#x26; every user has a <code>User UID</code> is how you connect custome user data in your database</p>
</li>
<li>
<p>When it comes to authentication there are multiple types that can be wired up quite easily</p>
</li>
<li>
<p>Available options:</p>
<ul>
<li>email/password</li>
<li>Google</li>
<li>Apple</li>
<li>Facebook</li>
<li>Twitter</li>
<li>Github</li>
</ul>
</li>
<li>
<p>You can also have anonymous auth</p>
</li>
<li>
<p>Click the <code>Auth</code> tab, click the <code>enable</code> button &#x26; select the <code>sign-in providers</code></p>
</li>
<li>
<p><a href="https://firebase.google.com/docs/auth/web/password-auth">Sign in with Email &#x26; Password</a></p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> initializeApp <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'firebase/app'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getAuth<span class="token punctuation">,</span> signInWithEmailAndPassword<span class="token punctuation">,</span> onAuthStateChanged<span class="token punctuation">,</span> connectAuthEmulator <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'firebase/auth'</span>

<span class="token keyword module">import</span> <span class="token imports">config</span> <span class="token keyword module">from</span> <span class="token string">'~/config'</span>

<span class="token keyword">const</span> firebaseApp <span class="token operator">=</span> <span class="token function">initializeApp</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token property-access">firebase</span><span class="token punctuation">)</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token function">getAuth</span><span class="token punctuation">(</span>firebaseApp<span class="token punctuation">)</span>
</code></pre></div>
</li>
<li>
<p><a href="https://firebase.google.com/docs/auth/web/google-signin">Sign in with Google</a>:</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getAuth<span class="token punctuation">,</span> signInWithPopup<span class="token punctuation">,</span> <span class="token maybe-class-name">GoogleAuthProvider</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">"firebase/auth"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token function">getAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">signInWithPopup</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> provider<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// This gives you a Google Access Token. You can use it to access the Google API.</span>
    <span class="token keyword">const</span> credential <span class="token operator">=</span> <span class="token maybe-class-name">GoogleAuthProvider</span><span class="token punctuation">.</span><span class="token method function property-access">credentialFromResult</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> token <span class="token operator">=</span> credential<span class="token punctuation">.</span><span class="token property-access">accessToken</span><span class="token punctuation">;</span>
    <span class="token comment">// The signed-in user info.</span>
    <span class="token keyword">const</span> user <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token property-access">user</span><span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword control-flow">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// Handle Errors here.</span>
    <span class="token keyword">const</span> errorCode <span class="token operator">=</span> error<span class="token punctuation">.</span><span class="token property-access">code</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> errorMessage <span class="token operator">=</span> error<span class="token punctuation">.</span><span class="token property-access">message</span><span class="token punctuation">;</span>
    <span class="token comment">// The email of the user's account used.</span>
    <span class="token keyword">const</span> email <span class="token operator">=</span> error<span class="token punctuation">.</span><span class="token property-access">email</span><span class="token punctuation">;</span>
    <span class="token comment">// The AuthCredential type that was used.</span>
    <span class="token keyword">const</span> credential <span class="token operator">=</span> <span class="token maybe-class-name">GoogleAuthProvider</span><span class="token punctuation">.</span><span class="token method function property-access">credentialFromError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
</li>
<li>
<p>If you are using React you can create a <code>Provider</code> to deal with the user state</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">React</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useContext<span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> createContext <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span>
<span class="token keyword module">import</span> <span class="token imports">config</span> <span class="token keyword module">from</span> <span class="token string">'~/config'</span>

<span class="token keyword">const</span> firebaseApp <span class="token operator">=</span> <span class="token function">initializeApp</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token property-access">firebase</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token function">getAuth</span><span class="token punctuation">(</span>firebaseApp<span class="token punctuation">)</span>

<span class="token function">createContext</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span>


<span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">App</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>isAuthenticated<span class="token punctuation">,</span> setAuthentication<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token function">useContext</span><span class="token punctuation">(</span><span class="token maybe-class-name">AuthContext</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// Things you should know: auth.onAuthStateChanged follows the observer pattern needs</span>
    <span class="token comment">// to be unsubscribe on every run. The useEffect hook will check authentication state</span>
    <span class="token comment">// after rerender. That means everytime the value from AuthContext is updated.</span>
    <span class="token keyword">const</span> unsubscribe <span class="token operator">=</span> auth<span class="token punctuation">.</span><span class="token method function property-access">onAuthStateChanged</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      user <span class="token operator">?</span> <span class="token function">setAuthentication</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">setAuthentication</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
      <span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span><span class="token maybe-class-name">AuthContext</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Provider</span></span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>isAuthenticated<span class="token punctuation">,</span> setAuthentication<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token punctuation">{</span>auth<span class="token operator">?.</span>currentUser<span class="token operator">?.</span>email<span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span><span class="token maybe-class-name">AuthContext</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Provider</span></span><span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div>
</li>
</ul>
<h1>FireStore</h1>
<ul>
<li>
<p>You need to <code>Enable Cloud Firestore</code> before using it</p>
<ul>
<li>Click the <code>Firestore</code> tab, click the <code>create database</code></li>
<li>Select the <code>Start in production mode</code></li>
</ul>
</li>
<li>
<p>Production mode</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js">rules_version <span class="token operator">=</span> <span class="token string">'2'</span><span class="token punctuation">;</span>
service cloud<span class="token punctuation">.</span><span class="token property-access">firestore</span> <span class="token punctuation">{</span>
  match <span class="token operator">/</span>databases<span class="token operator">/</span><span class="token punctuation">{</span>database<span class="token punctuation">}</span><span class="token operator">/</span>documents <span class="token punctuation">{</span>
    match <span class="token operator">/</span><span class="token punctuation">{</span><span class="token dom variable">document</span><span class="token operator">=</span><span class="token operator">**</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
      allow read<span class="token punctuation">,</span> write<span class="token operator">:</span> <span class="token keyword control-flow">if</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
</li>
<li>
<p>Testing mode</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js">rules_version <span class="token operator">=</span> <span class="token string">'2'</span><span class="token punctuation">;</span>
service cloud<span class="token punctuation">.</span><span class="token property-access">firestore</span> <span class="token punctuation">{</span>
  match <span class="token operator">/</span>databases<span class="token operator">/</span><span class="token punctuation">{</span>database<span class="token punctuation">}</span><span class="token operator">/</span>documents <span class="token punctuation">{</span>
    match <span class="token operator">/</span><span class="token punctuation">{</span><span class="token dom variable">document</span><span class="token operator">=</span><span class="token operator">**</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
      allow read<span class="token punctuation">,</span> write<span class="token operator">:</span> <span class="token keyword control-flow">if</span>
          request<span class="token punctuation">.</span><span class="token property-access">time</span> <span class="token operator">&#x3C;</span> timestamp<span class="token punctuation">.</span><span class="token method function property-access">date</span><span class="token punctuation">(</span><span class="token number">2021</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
</li>
<li>
<p>The DB is a NoSQL database, where each key has a UID (you can create your own if you want or have firebase automatically generate one for you)</p>
</li>
<li>
<p>Each document is a set of key/value</p>
</li>
<li>
<p>When working with the emulator you can update the rules that you have referenced in your <code>firebase.json</code> file and it will update it in automatically</p>
</li>
<li>
<p>Exmaple of adding a record to the DB</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> initializeApp <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'firebase/app'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getAuth<span class="token punctuation">,</span> signInWithEmailAndPassword<span class="token punctuation">,</span> onAuthStateChanged<span class="token punctuation">,</span> connectAuthEmulator <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'firebase/auth'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> getFirestore<span class="token punctuation">,</span> collection<span class="token punctuation">,</span> getDocs<span class="token punctuation">,</span> addDoc<span class="token punctuation">,</span> connectFirestoreEmulator <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'firebase/firestore'</span>

<span class="token keyword">const</span> firebaseApp <span class="token operator">=</span> <span class="token function">initializeApp</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token property-access">firebase</span><span class="token punctuation">)</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> auth <span class="token operator">=</span> <span class="token function">getAuth</span><span class="token punctuation">(</span>firebaseApp<span class="token punctuation">)</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token function">getFirestore</span><span class="token punctuation">(</span>firebaseApp<span class="token punctuation">)</span>

<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token dom variable">location</span><span class="token punctuation">.</span><span class="token property-access">hostname</span> <span class="token operator">===</span> <span class="token string">'localhost'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">connectAuthEmulator</span><span class="token punctuation">(</span>auth<span class="token punctuation">,</span> <span class="token string">'http://localhost:9099'</span><span class="token punctuation">)</span>
  <span class="token function">connectFirestoreEmulator</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span> <span class="token number">8088</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> userCollection <span class="token operator">=</span> <span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">'user'</span><span class="token punctuation">)</span>
  <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> docRef <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">addDoc</span><span class="token punctuation">(</span>userCollection<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      first<span class="token operator">:</span> <span class="token string">'Ada'</span><span class="token punctuation">,</span>
      last<span class="token operator">:</span> <span class="token string">'Lovelace'</span><span class="token punctuation">,</span>
      born<span class="token operator">:</span> <span class="token number">1815</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Document written with ID: '</span><span class="token punctuation">,</span> docRef<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">'Error adding document: '</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getAllUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> userCollection <span class="token operator">=</span> <span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">'user'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> querySnapshot <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">getDocs</span><span class="token punctuation">(</span>userCollection<span class="token punctuation">)</span>
  <span class="token keyword">let</span> listData<span class="token operator">:</span> any <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  querySnapshot<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">doc</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> listData<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span><span class="token method function property-access">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">' [List] '</span><span class="token punctuation">,</span> listData<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">queryUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> userCollection <span class="token operator">=</span> <span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">'user'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> q <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span>userCollection<span class="token punctuation">,</span> <span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'=='</span><span class="token punctuation">,</span> <span class="token string">'luis'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> querySnapshot <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">getDocs</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span>
  <span class="token keyword">let</span> listData<span class="token operator">:</span> any <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  querySnapshot<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">doc</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> listData<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span><span class="token method function property-access">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">' [List] '</span><span class="token punctuation">,</span> listData<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">queryUserRealtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> userCollection <span class="token operator">=</span> <span class="token function">collection</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">'user'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> q <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span>userCollection<span class="token punctuation">,</span> <span class="token function">where</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'=='</span><span class="token punctuation">,</span> <span class="token string">'phil'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token comment">// MAKE SURE YOU UNSUBSCRIBE! (this will run anytime the data changes)</span>
  <span class="token keyword">const</span> unsubscribe <span class="token operator">=</span> <span class="token function">onSnapshot</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">querySnapshot</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> cities<span class="token operator">:</span> any <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    querySnapshot<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">doc</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      cities<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span><span class="token method function property-access">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">username</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'username: '</span><span class="token punctuation">,</span> cities<span class="token punctuation">.</span><span class="token method function property-access">join</span><span class="token punctuation">(</span><span class="token string">', '</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div>
</li>
<li>
<p>Using a <code>batch</code> allows you to preform multiple functions on the DB and have them fail/success together</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token comment">// Get a new write batch</span>
<span class="token keyword">var</span> batch <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token method function property-access">batch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Set the value of 'NYC'</span>
<span class="token keyword">var</span> nycRef <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token method function property-access">collection</span><span class="token punctuation">(</span><span class="token string">"cities"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">doc</span><span class="token punctuation">(</span><span class="token string">"NYC"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
batch<span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span>nycRef<span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">"New York City"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Update the population of 'SF'</span>
<span class="token keyword">var</span> sfRef <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token method function property-access">collection</span><span class="token punctuation">(</span><span class="token string">"cities"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">doc</span><span class="token punctuation">(</span><span class="token string">"SF"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
batch<span class="token punctuation">.</span><span class="token method function property-access">update</span><span class="token punctuation">(</span>sfRef<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">"population"</span><span class="token operator">:</span> <span class="token number">1000000</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Delete the city 'LA'</span>
<span class="token keyword">var</span> laRef <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token method function property-access">collection</span><span class="token punctuation">(</span><span class="token string">"cities"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">doc</span><span class="token punctuation">(</span><span class="token string">"LA"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
batch<span class="token punctuation">.</span><span class="token method function property-access">delete</span><span class="token punctuation">(</span>laRef<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Commit the batch</span>
batch<span class="token punctuation">.</span><span class="token method function property-access">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
</li>
<li>
<p>You can view your current DB rules <a href="http://localhost:8088/emulator/v1/projects/%3Cdatabase_name%3E:ruleCoverage.html">here</a></p>
</li>
<li>
<p>Make sure that when you create a <strong>timestamp</strong> that you use thee <code>serverTimestamp()</code> provided by firebase <code>import { serverTimestamp } from 'firebase/firestore'</code> to make sure the timestamp is consistent along all client devices</p>
</li>
<li>
<p><a href="https://firebase.google.com/docs/firestore/query-data/queries">Docs on preforming simple &#x26; compound queries</a></p>
</li>
<li>
<p>Firebase will warn you if you need to create a <code>composite index</code>, but you just need to click on the link and it will create it for you</p>
</li>
<li>
<p>Now Security Rules</p>
<ul>
<li>Start by making the entire DB locked down
<div class="remark-highlight"><pre class="language-js"><code class="language-js">rules_version <span class="token operator">=</span> <span class="token string">'2'</span><span class="token punctuation">;</span>
service cloud<span class="token punctuation">.</span><span class="token property-access">firestore</span> <span class="token punctuation">{</span>

  match <span class="token operator">/</span>databases<span class="token operator">/</span><span class="token punctuation">{</span>database<span class="token punctuation">}</span><span class="token operator">/</span>documents <span class="token punctuation">{</span>
    match <span class="token operator">/</span><span class="token punctuation">{</span><span class="token dom variable">document</span><span class="token operator">=</span><span class="token operator">**</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
      allow read<span class="token punctuation">,</span> write<span class="token operator">:</span> <span class="token keyword control-flow">if</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div>
</li>
<li>Now add in rights selectively</li>
</ul>
<div class="remark-highlight"><pre class="language-js"><code class="language-js">rules_version <span class="token operator">=</span> <span class="token string">'2'</span><span class="token punctuation">;</span>
 service cloud<span class="token punctuation">.</span><span class="token property-access">firestore</span> <span class="token punctuation">{</span>

   match <span class="token operator">/</span>databases<span class="token operator">/</span><span class="token punctuation">{</span>database<span class="token punctuation">}</span><span class="token operator">/</span>documents <span class="token punctuation">{</span>
     match <span class="token operator">/</span><span class="token punctuation">{</span><span class="token dom variable">document</span><span class="token operator">=</span><span class="token operator">**</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
       allow read<span class="token punctuation">,</span> write<span class="token operator">:</span> <span class="token keyword control-flow">if</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>

 
 <span class="token punctuation">}</span>
</code></pre></div>
</li>
</ul>
<h2>Adding Geospatial to your DB</h2>
<ul>
<li>You can do geospatial stuff with <code>firestore</code> because of geohashing</li>
<li>A geohash is a convenient way of expressing a location (anywhere in the world) using a short alphanumeric string, with greater precision obtained with longer strings.</li>
<li>A geohash actually identifies a rectangular cell: at each level, each extra character identifies one of 32 sub-cells.</li>
<li><img src="/assets/blog/geo/geohash.jpg" alt="geohash"></li>
<li><a href="https://www.movable-type.co.uk/scripts/geohash.html">Read more on geohashes</a></li>
<li>Vancouver, BC has coordinates of 49.2827° N, 123.1207° W and the geohash would be <a href="http://geohash.org/c2b2q7dhx"><code>c2b2q7dhx</code></a></li>
</ul>
<h3>Using <code>geofirestore</code></h3>
<ul>
<li><a href="https://geofirestore.com/">geofirestore docs</a></li>
<li>As of 09-2021 <code>geofirestore</code> only supports up to <code>firebase</code> v8</li>
<li>Exmaple
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword module">import</span> <span class="token imports">firebase</span> <span class="token keyword module">from</span> <span class="token string">'firebase/app'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token string">'firebase/firestore'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token operator">*</span> <span class="token keyword module">as</span> geofirestore</span> <span class="token keyword module">from</span> <span class="token string">'geofirestore'</span><span class="token punctuation">;</span>


<span class="token comment">// Initialize the Firebase SDK</span>
firebase<span class="token punctuation">.</span><span class="token method function property-access">initializeApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create a Firestore reference</span>
<span class="token keyword">const</span> firestore <span class="token operator">=</span> firebase<span class="token punctuation">.</span><span class="token method function property-access">firestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create a GeoFirestore reference</span>
<span class="token keyword">const</span> <span class="token maybe-class-name">GeoFirestore</span> <span class="token operator">=</span> geofirestore<span class="token punctuation">.</span><span class="token method function property-access">initializeApp</span><span class="token punctuation">(</span>firestore<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create a GeoCollection reference</span>
<span class="token keyword">const</span> geocollection <span class="token operator">=</span> <span class="token maybe-class-name">GeoFirestore</span><span class="token punctuation">.</span><span class="token method function property-access">collection</span><span class="token punctuation">(</span><span class="token string">'restaurants'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Add a GeoDocument to a GeoCollection</span>
geocollection<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Geofirestore'</span><span class="token punctuation">,</span>
  score<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  <span class="token comment">// The coordinates field must be a GeoPoint!</span>
  coordinates<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">firebase<span class="token punctuation">.</span>firestore<span class="token punctuation">.</span>GeoPoint</span><span class="token punctuation">(</span><span class="token number">40.7589</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">73.9851</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Create a GeoQuery based on a location</span>
<span class="token keyword">const</span> query <span class="token operator">=</span> geocollection<span class="token punctuation">.</span><span class="token method function property-access">near</span><span class="token punctuation">(</span><span class="token punctuation">{</span> center<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">firebase<span class="token punctuation">.</span>firestore<span class="token punctuation">.</span>GeoPoint</span><span class="token punctuation">(</span><span class="token number">40.7589</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">73.9851</span><span class="token punctuation">)</span><span class="token punctuation">,</span> radius<span class="token operator">:</span> <span class="token number">1000</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Get query (as Promise)</span>
query<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// All GeoDocument returned by GeoQuery, like the GeoDocument added above</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token property-access">docs</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
</li>
</ul>
<h3>Addig geospatial functionality with <code>geofirex</code></h3>
<ul>
<li>
<p>Unfortunately <code>geofirex</code> has a peer dependency of <code>"firebase": "^7.2.0"</code> and firebase is at v9 as of 2021 so this may not be the best option</p>
</li>
<li>
<p>Start by adding some npm packages</p>
<div class="remark-highlight"><pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> init -y
<span class="token function">npm</span> i firebase-admin geofirex
</code></pre></div>
</li>
<li>
<p>Create a file to seed the database</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> admin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"firebase-admin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> serviceAccount <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./firebase-creds.json"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

admin<span class="token punctuation">.</span><span class="token method function property-access">initializeApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  credential<span class="token operator">:</span> admin<span class="token punctuation">.</span><span class="token property-access">credential</span><span class="token punctuation">.</span><span class="token method function property-access">cert</span><span class="token punctuation">(</span>serviceAccount<span class="token punctuation">)</span><span class="token punctuation">,</span>
  databaseURL<span class="token operator">:</span> <span class="token string">"https://&#x3C;FIREBASE_PROJECT_NAME>.firebaseio.com"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Init GeoFireX</span>
<span class="token keyword">const</span> geofirex <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"geofirex"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> geo <span class="token operator">=</span> geofirex<span class="token punctuation">.</span><span class="token method function property-access">init</span><span class="token punctuation">(</span>admin<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> pinsRef <span class="token operator">=</span> admin<span class="token punctuation">.</span><span class="token method function property-access">firestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">collection</span><span class="token punctuation">(</span><span class="token string">"pins"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Add some markers</span>
pinsRef<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"Phoenix"</span><span class="token punctuation">,</span> position<span class="token operator">:</span> geo<span class="token punctuation">.</span><span class="token method function property-access">point</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">119</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pinsRef<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"Portland"</span><span class="token punctuation">,</span> position<span class="token operator">:</span> geo<span class="token punctuation">.</span><span class="token method function property-access">point</span><span class="token punctuation">(</span><span class="token number">45.52054</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">122.6795</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pinsRef<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"Vancouver"</span><span class="token punctuation">,</span> position<span class="token operator">:</span> geo<span class="token punctuation">.</span><span class="token method function property-access">point</span><span class="token punctuation">(</span><span class="token number">49.2827</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">123.1207</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pinsRef<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"Seattle"</span><span class="token punctuation">,</span> position<span class="token operator">:</span> geo<span class="token punctuation">.</span><span class="token method function property-access">point</span><span class="token punctuation">(</span><span class="token number">47.604311</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">122.33551</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pinsRef<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"San Francisco"</span><span class="token punctuation">,</span> position<span class="token operator">:</span> geo<span class="token punctuation">.</span><span class="token method function property-access">point</span><span class="token punctuation">(</span><span class="token number">37.771800273</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">122.416534</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pinsRef<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"Ottawa"</span><span class="token punctuation">,</span> position<span class="token operator">:</span> geo<span class="token punctuation">.</span><span class="token method function property-access">point</span><span class="token punctuation">(</span><span class="token number">45.42062</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">75.697174</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pinsRef<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"Victoria"</span><span class="token punctuation">,</span> position<span class="token operator">:</span> geo<span class="token punctuation">.</span><span class="token method function property-access">point</span><span class="token punctuation">(</span><span class="token number">48.426922</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">123.36341</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
</li>
<li>
<p>Now you can make queries against your table</p>
<div class="remark-highlight"><pre class="language-js"><code class="language-js"><span class="token keyword">var</span> admin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"firebase-admin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> serviceAccount <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./firebase-creds.json"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

admin<span class="token punctuation">.</span><span class="token method function property-access">initializeApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  credential<span class="token operator">:</span> admin<span class="token punctuation">.</span><span class="token property-access">credential</span><span class="token punctuation">.</span><span class="token method function property-access">cert</span><span class="token punctuation">(</span>serviceAccount<span class="token punctuation">)</span><span class="token punctuation">,</span>
  databaseURL<span class="token operator">:</span> <span class="token string">"https://&#x3C;FIREBASE_PROJECT_NAME>.firebaseio.com"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Init GeoFireX</span>
<span class="token keyword">const</span> geofirex <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"geofirex"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> geo <span class="token operator">=</span> geofirex<span class="token punctuation">.</span><span class="token method function property-access">init</span><span class="token punctuation">(</span>admin<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> pinsRef <span class="token operator">=</span> admin<span class="token punctuation">.</span><span class="token method function property-access">firestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">collection</span><span class="token punctuation">(</span><span class="token string">"pins"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Query wthin</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getPointsWithin</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> center<span class="token punctuation">,</span> radius<span class="token punctuation">,</span> field <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> query <span class="token operator">=</span> geo<span class="token punctuation">.</span><span class="token method function property-access">query</span><span class="token punctuation">(</span>pinsRef<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">within</span><span class="token punctuation">(</span>center<span class="token punctuation">,</span> radius<span class="token punctuation">,</span> field<span class="token punctuation">,</span> <span class="token punctuation">{</span> log<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> obs <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token method function property-access">pipe</span><span class="token punctuation">(</span>geofirex<span class="token punctuation">.</span><span class="token method function property-access">toGeoJSON</span><span class="token punctuation">(</span><span class="token string">"position"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> geojson <span class="token operator">=</span> <span class="token keyword control-flow">await</span> geofirex<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>obs<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> geojson<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">getPointsWithin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  center<span class="token operator">:</span> geo<span class="token punctuation">.</span><span class="token method function property-access">point</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">122</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  radius<span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token comment">//km</span>
  field<span class="token operator">:</span> <span class="token string">"position"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
</li>
</ul>
<h1>Firebase Storage</h1>
<ul>
<li>When working with an Application with user's it's best to make a folder in your storage with the uid of that user</li>
<li>When you add files to the <em>Firebase Storage</em> it will create a storage location URL for that file</li>
</ul>
</div></div></article></div></main></div><footer class="bg-accent-1 border-t border-accent-2"><div class="container mx-auto px-5"><div class="py-28 flex flex-col lg:flex-row items-center"><div class="flex flex-col lg:flex-row justify-center items-center lg:pl-4 lg:w-1/2"><a href="/">Learn something else</a></div></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"firebase","slug":"firebase","content":"\u003ch1\u003eOverview of firebase\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://firebase.google.com/docs/build\"\u003efirebase docs\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003eFirebase allows you to:\u003c/li\u003e\n\u003cli\u003eauthenticate users\u003c/li\u003e\n\u003cli\u003eDatabase\u003c/li\u003e\n\u003cli\u003eServer-side code via Functions\u003c/li\u003e\n\u003cli\u003eSecurity\u003c/li\u003e\n\u003cli\u003eAnalytics\u003c/li\u003e\n\u003cli\u003eScale\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eA huge thing is you pay $0 until you app builds a decent user base\u003c/li\u003e\n\u003cli\u003eOpt in features DB, Storage, Serverless Functions,\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eBackend as a Service\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eFirebase is just an extension of Google Cloud Platform, at it's core Firebase is an SDK that makes it easy for your frontend app to back google cloud infrastructure\u003c/li\u003e\n\u003cli\u003eThe console sidebar is divided into sections: \u003cem\u003eBuild\u003c/em\u003e, \u003cem\u003eRelease \u0026#x26; Monitor\u003c/em\u003e, \u003cem\u003eAnalytics\u003c/em\u003e, \u0026#x26; \u003cem\u003eEngage\u003c/em\u003e\u003c/li\u003e\n\u003cli\u003eFirebase is \u003ccode\u003eopt-in\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eFirebase also has extenstions\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003eGet Started\u003c/h1\u003e\n\u003col\u003e\n\u003cli\u003eGo to \u003ca href=\"https://console.firebase.google.com/\"\u003eFirebase console\u003c/a\u003e and log in with your gmail account\u003c/li\u003e\n\u003cli\u003eCreate a Project\u003c/li\u003e\n\u003cli\u003eInstall the node global packages\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e$ \u003cspan class=\"token function\"\u003enpm\u003c/span\u003e \u003cspan class=\"token function\"\u003einstall\u003c/span\u003e -g firebase-tools\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003col start=\"4\"\u003e\n\u003cli\u003eYou can initialize multiple firenase services or each seperatly (you can always add/remove very easily)\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e$ firebase login\n\u003cspan class=\"token comment\"\u003e# this will open up your browser \u0026#x26; ask you to authenticate\u003c/span\u003e\n$ firebase init\n\u003cspan class=\"token comment\"\u003e# ◉ Firestore: Configure security rules and indexes files for Firestore\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e# ◉ Functions: Configure a Cloud Functions directory and its files\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e# ◉ Hosting: Configure files for Firebase Hosting and (optionally) set up GitHub Action deploys\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e# ◉ Hosting: Set up GitHub Action deploys\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e# ◉ Storage: Configure a security rules file for Cloud Storage\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e# ◉ Emulators: Set up local emulators for Firebase products\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003eFirebase files\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e├── .firebaserc\n├── firebase.json\n├── firebase/\n│   └── firestore.indexes.json\n│   └── firestore.rules\n│   └── storage.rules\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003col start=\"5\"\u003e\n\u003cli\u003eIf you are using VSCode you might want to install the \u003ca href=\"https://marketplace.visualstudio.com/items?itemName=jsayol.firebase-explorer\"\u003eFirebase Explorer extension\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1\u003eWeb hosting\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eHosting is where you web application will ultimately be deployed, it's a storage bucket that's available on the internet and served over a CDN make your web app really fast around the world\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ePricing is based on the GB stored on your account + GB transfered out to your users (it's VERY generous)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eSetup web hosting:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eEnable hoisting for you web application in the firebase console\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003eClick the \u003ccode\u003eProject Settings\u003c/code\u003e gear icon in the side nav, under the \u003ccode\u003eYour apps\u003c/code\u003e click the \u003ccode\u003e\u0026#x3C;/\u003e\u003c/code\u003e button to initiate a web application\u003c/li\u003e\n\u003cli\u003eRegister an App\u003c/li\u003e\n\u003cli\u003eCheck the \u003ccode\u003eAlso setup Firebase Hosting for this app\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eCopy the code snippet (This snippet is ok to be public, cause firebase does other stuff to secure it)\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e firebaseConfig \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  apiKey\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"wertyuiop\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  authDomain\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"some-awesome-app.firebaseapp.com\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  projectId\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"some-awesome-app\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  storageBucket\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"some-awesome-app.appspot.com\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  messagingSenderId\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"1234567890\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  appId\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"1:12345678:web:12345678\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  measurementId\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"G-QWERTYUIOP\"\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003eSecurity in Firebase is done on the database side\u003c/li\u003e\n\u003c/ul\u003e\n\u003col start=\"2\"\u003e\n\u003cli\u003eInitiallize hosting with firebase-tools\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e$ firebase init hosting\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003col start=\"3\"\u003e\n\u003cli\u003eAdd emulator config\u003c/li\u003e\n\u003c/ol\u003e\n\u003cul\u003e\n\u003cli\u003eThe above command will create a \u003ccode\u003efirebase.json\u003c/code\u003e \u0026#x26; \u003ccode\u003e.firebaserc\u003c/code\u003e (resource config file just contains a project identifier for our project in the cloud), you want to add some configuration to the \u003ccode\u003efirebase.json\u003c/code\u003e to tell the firebase emulator what port to emulate the web hosting\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-json\"\u003e\u003ccode class=\"language-json\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003cspan class=\"token property\"\u003e\"emulators\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"hosting\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token property\"\u003e\"port\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e5000\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003col start=\"4\"\u003e\n\u003cli\u003eRun the emulator\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e$ firebase emulators:start \n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe \u003ccode\u003efirebase.json\u003c/code\u003e provides some information aout all the firebase services, in this case we are looking at \u003ccode\u003ehosting\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe \u003ccode\u003epublic\u003c/code\u003e key points you your build version of the web application\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe \u003ccode\u003erewrites\u003c/code\u003e is what you want to add if you are planning on hosting a Single Page Application (aka web app with client side routing)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eWhen a browser attempts to open a URL path that matches the specified source or regex URL pattern, the browser will be given the contents of the file at the destination URL instead. Specify URL rewrites by creating a rewrites attribute that contains an array of objects (called \"rewrite rules\").\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe \u003ccode\u003eemulator\u003c/code\u003e key is for emulating firebase services, in this case we provide a port that we want to emulate what the \u003ccode\u003ehosting.public\u003c/code\u003e folder show. This is great cause you can test how firebase web hosting will look like for the production version locally. (don't have to deploy multiple times to the actual service to test a behavior)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eExample of a \u003ccode\u003efirebase.json\u003c/code\u003e file:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-json\"\u003e\u003ccode class=\"language-json\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\"hosting\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"public\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"build\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// the only required attribute for Hosting\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"ignore\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\n       \u003cspan class=\"token string\"\u003e\"firebase.json\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e// the Firebase configuration file (the file described on this page)\u003c/span\u003e\n      \u003cspan class=\"token string\"\u003e\"**/.*\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e// files with a leading period should be hidden from the system\u003c/span\u003e\n      \u003cspan class=\"token string\"\u003e\"**/node_modules/**\"\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e// contains dependencies used to create your site but not run it\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"rewrites\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token property\"\u003e\"source\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"**\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"token property\"\u003e\"destination\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"/index.html\"\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// For SPA web app (clientside routing)\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\"emulators\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"hosting\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token property\"\u003e\"port\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e5000\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eYou can also use the \u003ccode\u003erewrite rules\u003c/code\u003e to trigger a firebase function\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-json\"\u003e\u003ccode class=\"language-json\"\u003e\u003cspan class=\"token property\"\u003e\"hosting\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// ...\u003c/span\u003e\n\n  \u003cspan class=\"token comment\"\u003e// Directs all requests from the page `/bigben` to execute the `bigben` function\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\"rewrites\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"source\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"/trigger-some-function\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"function\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"someAwesomeFunction\"\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eLearn more about \u003ca href=\"https://firebase.google.com/docs/hosting/full-config\"\u003econfiguring rewrites here\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eExample of a \u003ccode\u003e.firebaserc\u003c/code\u003e, the \u003ccode\u003eproject.default\u003c/code\u003e name should match the one you made in the Firebase Console\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-json\"\u003e\u003ccode class=\"language-json\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token property\"\u003e\"projects\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token property\"\u003e\"default\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"\u0026#x3C;YOUR_PROJECT_NAME\u003e\"\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eNow you can run the hoisting emulator\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-unknown\"\u003e\u003ccode class=\"language-unknown\"\u003e$ firebase emulators:start --only hosting\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eYou can deploy your app:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e$ firebase deploy --only hosting\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eYou can also deploy your app with \u003ca href=\"https://firebase.google.com/docs/hosting/github-integration\"\u003eGithub Actions\u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e$ firebase init hosting\n$ firebase init hosting:github\n\u003cspan class=\"token comment\"\u003e# Follow the CLI prompts, and the command will automatically take care of setting up the GitHub Action:\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003eExample of a Github Actions files \u003ccode\u003e.github/workflows/firebase-hosting-merge.yml\u003c/code\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-yml\"\u003e\u003ccode class=\"language-yml\"\u003e\u003cspan class=\"token key atrule\"\u003ename\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e Deploy to Firebase Hosting on merge\n\u003cspan class=\"token key atrule\"\u003e'on'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"token key atrule\"\u003epush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token key atrule\"\u003ebranches\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003e main\n\u003cspan class=\"token key atrule\"\u003ejobs\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n  \u003cspan class=\"token key atrule\"\u003ebuild_and_deploy\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token key atrule\"\u003eruns-on\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e ubuntu\u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003elatest\n    \u003cspan class=\"token key atrule\"\u003esteps\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003e \u003cspan class=\"token key atrule\"\u003euses\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e actions/checkout@v2\n      \u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003e \u003cspan class=\"token key atrule\"\u003erun\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e npm ci \u003cspan class=\"token important\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e npm run build\n      \u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003e \u003cspan class=\"token key atrule\"\u003euses\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e FirebaseExtended/action\u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003ehosting\u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003edeploy@v0\n        \u003cspan class=\"token key atrule\"\u003ewith\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n          \u003cspan class=\"token key atrule\"\u003erepoToken\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'${{ secrets.GITHUB_TOKEN }}'\u003c/span\u003e\n          \u003cspan class=\"token key atrule\"\u003efirebaseServiceAccount\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'${{ secrets.FIREBASE_SERVICE_ACCOUNT_PIN_THAT_EXAMPLE }}'\u003c/span\u003e\n          \u003cspan class=\"token key atrule\"\u003echannelId\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e live\n          \u003cspan class=\"token key atrule\"\u003eprojectId\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e pin\u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003ethat\u003cspan class=\"token punctuation\"\u003e-\u003c/span\u003eexample\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eIn the Firebase Console, under the hosting tab you can also add a custom domain to your web app\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003eAuth\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eThe \u003ccode\u003eAuthentication\u003c/code\u003e is kinda like a \u003cem\u003eread-only\u003c/em\u003e database for your users\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eYou can add users manually \u0026#x26; every user has a \u003ccode\u003eUser UID\u003c/code\u003e is how you connect custome user data in your database\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eWhen it comes to authentication there are multiple types that can be wired up quite easily\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eAvailable options:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eemail/password\u003c/li\u003e\n\u003cli\u003eGoogle\u003c/li\u003e\n\u003cli\u003eApple\u003c/li\u003e\n\u003cli\u003eFacebook\u003c/li\u003e\n\u003cli\u003eTwitter\u003c/li\u003e\n\u003cli\u003eGithub\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eYou can also have anonymous auth\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eClick the \u003ccode\u003eAuth\u003c/code\u003e tab, click the \u003ccode\u003eenable\u003c/code\u003e button \u0026#x26; select the \u003ccode\u003esign-in providers\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://firebase.google.com/docs/auth/web/password-auth\"\u003eSign in with Email \u0026#x26; Password\u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e initializeApp \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'firebase/app'\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e getAuth\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e signInWithEmailAndPassword\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e onAuthStateChanged\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e connectAuthEmulator \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'firebase/auth'\u003c/span\u003e\n\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003econfig\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'~/config'\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e firebaseApp \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003einitializeApp\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003econfig\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003efirebase\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e auth \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003egetAuth\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efirebaseApp\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://firebase.google.com/docs/auth/web/google-signin\"\u003eSign in with Google\u003c/a\u003e:\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e getAuth\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e signInWithPopup\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eGoogleAuthProvider\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"firebase/auth\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e auth \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003egetAuth\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token function\"\u003esignInWithPopup\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eauth\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e provider\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ethen\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003eresult\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// This gives you a Google Access Token. You can use it to access the Google API.\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e credential \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eGoogleAuthProvider\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecredentialFromResult\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eresult\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e token \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e credential\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eaccessToken\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// The signed-in user info.\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e user \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e result\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003euser\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// ...\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token keyword control-flow\"\u003ecatch\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003eerror\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// Handle Errors here.\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e errorCode \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e error\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ecode\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e errorMessage \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e error\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003emessage\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// The email of the user's account used.\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e email \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e error\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eemail\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// The AuthCredential type that was used.\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e credential \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eGoogleAuthProvider\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecredentialFromError\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eerror\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// ...\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eIf you are using React you can create a \u003ccode\u003eProvider\u003c/code\u003e to deal with the user state\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eReact\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e useState\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e useContext\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e useEffect\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e createContext \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'react'\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003econfig\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'~/config'\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e firebaseApp \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003einitializeApp\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003econfig\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003efirebase\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e auth \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003egetAuth\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efirebaseApp\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token function\"\u003ecreateContext\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword null nil\"\u003enull\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\n\u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eApp\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eisAuthenticated\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e setAuthentication\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003euseState\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token function\"\u003euseContext\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eAuthContext\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n  \u003cspan class=\"token function\"\u003euseEffect\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// Things you should know: auth.onAuthStateChanged follows the observer pattern needs\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// to be unsubscribe on every run. The useEffect hook will check authentication state\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// after rerender. That means everytime the value from AuthContext is updated.\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e unsubscribe \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e auth\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eonAuthStateChanged\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003euser\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      user \u003cspan class=\"token operator\"\u003e?\u003c/span\u003e \u003cspan class=\"token function\"\u003esetAuthentication\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003esetAuthentication\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token function\"\u003eunsubscribe\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n  \n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eAuthContext\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eProvider\u003c/span\u003e\u003c/span\u003e value\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eisAuthenticated\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e setAuthentication\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003eh1\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eauth\u003cspan class=\"token operator\"\u003e?.\u003c/span\u003ecurrentUser\u003cspan class=\"token operator\"\u003e?.\u003c/span\u003eemail\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003eh1\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eAuthContext\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eProvider\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003eFireStore\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eYou need to \u003ccode\u003eEnable Cloud Firestore\u003c/code\u003e before using it\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eClick the \u003ccode\u003eFirestore\u003c/code\u003e tab, click the \u003ccode\u003ecreate database\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eSelect the \u003ccode\u003eStart in production mode\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eProduction mode\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003erules_version \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e'2'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\nservice cloud\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003efirestore\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  match \u003cspan class=\"token operator\"\u003e/\u003c/span\u003edatabases\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003edatabase\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003edocuments \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    match \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token dom variable\"\u003edocument\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token operator\"\u003e**\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      allow read\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e write\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e \u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eTesting mode\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003erules_version \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e'2'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\nservice cloud\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003efirestore\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  match \u003cspan class=\"token operator\"\u003e/\u003c/span\u003edatabases\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003edatabase\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003edocuments \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    match \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token dom variable\"\u003edocument\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token operator\"\u003e**\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      allow read\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e write\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e\n          request\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003etime\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e timestamp\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003edate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e2021\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e6\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e13\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe DB is a NoSQL database, where each key has a UID (you can create your own if you want or have firebase automatically generate one for you)\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eEach document is a set of key/value\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eWhen working with the emulator you can update the rules that you have referenced in your \u003ccode\u003efirebase.json\u003c/code\u003e file and it will update it in automatically\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eExmaple of adding a record to the DB\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e initializeApp \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'firebase/app'\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e getAuth\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e signInWithEmailAndPassword\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e onAuthStateChanged\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e connectAuthEmulator \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'firebase/auth'\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e getFirestore\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e collection\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e getDocs\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e addDoc\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e connectFirestoreEmulator \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'firebase/firestore'\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e firebaseApp \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003einitializeApp\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003econfig\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003efirebase\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e auth \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003egetAuth\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efirebaseApp\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e db \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003egetFirestore\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efirebaseApp\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token dom variable\"\u003elocation\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ehostname\u003c/span\u003e \u003cspan class=\"token operator\"\u003e===\u003c/span\u003e \u003cspan class=\"token string\"\u003e'localhost'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token function\"\u003econnectAuthEmulator\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eauth\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'http://localhost:9099'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token function\"\u003econnectFirestoreEmulator\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003edb\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'localhost'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e8088\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eaddUser\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e userCollection \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003ecollection\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003edb\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'user'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003etry\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e docRef \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword control-flow\"\u003eawait\u003c/span\u003e \u003cspan class=\"token function\"\u003eaddDoc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003euserCollection\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      first\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'Ada'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      last\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'Lovelace'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      born\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1815\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'Document written with ID: '\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e docRef\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eid\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword control-flow\"\u003ecatch\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ee\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eerror\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'Error adding document: '\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003egetAllUsers\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e userCollection \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003ecollection\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003edb\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'user'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e querySnapshot \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword control-flow\"\u003eawait\u003c/span\u003e \u003cspan class=\"token function\"\u003egetDocs\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003euserCollection\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e listData\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e any \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n  querySnapshot\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eforEach\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003edoc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e listData\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003epush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003edoc\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003edata\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e' [List] '\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e listData\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003equeryUser\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e userCollection \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003ecollection\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003edb\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'user'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e q \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003equery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003euserCollection\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token function\"\u003ewhere\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'name'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'=='\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'luis'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e querySnapshot \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword control-flow\"\u003eawait\u003c/span\u003e \u003cspan class=\"token function\"\u003egetDocs\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eq\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e listData\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e any \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n  querySnapshot\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eforEach\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003edoc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e listData\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003epush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003edoc\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003edata\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e' [List] '\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e listData\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003equeryUserRealtime\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e userCollection \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003ecollection\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003edb\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'user'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e q \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003equery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003euserCollection\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token function\"\u003ewhere\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'name'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'=='\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'phil'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n  \u003cspan class=\"token comment\"\u003e// MAKE SURE YOU UNSUBSCRIBE! (this will run anytime the data changes)\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e unsubscribe \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eonSnapshot\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eq\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003equerySnapshot\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e cities\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e any \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n    querySnapshot\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eforEach\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003edoc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      cities\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003epush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003edoc\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003edata\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eusername\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'username: '\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e cities\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ejoin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e', '\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eUsing a \u003ccode\u003ebatch\u003c/code\u003e allows you to preform multiple functions on the DB and have them fail/success together\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token comment\"\u003e// Get a new write batch\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e batch \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e db\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ebatch\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Set the value of 'NYC'\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e nycRef \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e db\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecollection\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"cities\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003edoc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"NYC\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\nbatch\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eset\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003enycRef\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003ename\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"New York City\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Update the population of 'SF'\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e sfRef \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e db\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecollection\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"cities\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003edoc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"SF\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\nbatch\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eupdate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003esfRef\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"population\"\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1000000\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Delete the city 'LA'\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e laRef \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e db\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecollection\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"cities\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003edoc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"LA\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\nbatch\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003edelete\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003elaRef\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Commit the batch\u003c/span\u003e\nbatch\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecommit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ethen\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// ...\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eYou can view your current DB rules \u003ca href=\"http://localhost:8088/emulator/v1/projects/%3Cdatabase_name%3E:ruleCoverage.html\"\u003ehere\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eMake sure that when you create a \u003cstrong\u003etimestamp\u003c/strong\u003e that you use thee \u003ccode\u003eserverTimestamp()\u003c/code\u003e provided by firebase \u003ccode\u003eimport { serverTimestamp } from 'firebase/firestore'\u003c/code\u003e to make sure the timestamp is consistent along all client devices\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://firebase.google.com/docs/firestore/query-data/queries\"\u003eDocs on preforming simple \u0026#x26; compound queries\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eFirebase will warn you if you need to create a \u003ccode\u003ecomposite index\u003c/code\u003e, but you just need to click on the link and it will create it for you\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eNow Security Rules\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eStart by making the entire DB locked down\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003erules_version \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e'2'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\nservice cloud\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003efirestore\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\n  match \u003cspan class=\"token operator\"\u003e/\u003c/span\u003edatabases\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003edatabase\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003edocuments \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    match \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token dom variable\"\u003edocument\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token operator\"\u003e**\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      allow read\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e write\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e \u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003eNow add in rights selectively\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003erules_version \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e'2'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n service cloud\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003efirestore\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\n   match \u003cspan class=\"token operator\"\u003e/\u003c/span\u003edatabases\u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003edatabase\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token operator\"\u003e/\u003c/span\u003edocuments \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n     match \u003cspan class=\"token operator\"\u003e/\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token dom variable\"\u003edocument\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003e\u003cspan class=\"token operator\"\u003e**\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n       allow read\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e write\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e \u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n     \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n   \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n \n \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eAdding Geospatial to your DB\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eYou can do geospatial stuff with \u003ccode\u003efirestore\u003c/code\u003e because of geohashing\u003c/li\u003e\n\u003cli\u003eA geohash is a convenient way of expressing a location (anywhere in the world) using a short alphanumeric string, with greater precision obtained with longer strings.\u003c/li\u003e\n\u003cli\u003eA geohash actually identifies a rectangular cell: at each level, each extra character identifies one of 32 sub-cells.\u003c/li\u003e\n\u003cli\u003e\u003cimg src=\"/assets/blog/geo/geohash.jpg\" alt=\"geohash\"\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.movable-type.co.uk/scripts/geohash.html\"\u003eRead more on geohashes\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eVancouver, BC has coordinates of 49.2827° N, 123.1207° W and the geohash would be \u003ca href=\"http://geohash.org/c2b2q7dhx\"\u003e\u003ccode\u003ec2b2q7dhx\u003c/code\u003e\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eUsing \u003ccode\u003egeofirestore\u003c/code\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://geofirestore.com/\"\u003egeofirestore docs\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eAs of 09-2021 \u003ccode\u003egeofirestore\u003c/code\u003e only supports up to \u003ccode\u003efirebase\u003c/code\u003e v8\u003c/li\u003e\n\u003cli\u003eExmaple\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003efirebase\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'firebase/app'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token string\"\u003e'firebase/firestore'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003eas\u003c/span\u003e geofirestore\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'geofirestore'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\n\u003cspan class=\"token comment\"\u003e// Initialize the Firebase SDK\u003c/span\u003e\nfirebase\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003einitializeApp\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// ...\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Create a Firestore reference\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e firestore \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e firebase\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003efirestore\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Create a GeoFirestore reference\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eGeoFirestore\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e geofirestore\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003einitializeApp\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efirestore\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Create a GeoCollection reference\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e geocollection \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eGeoFirestore\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecollection\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'restaurants'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Add a GeoDocument to a GeoCollection\u003c/span\u003e\ngeocollection\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eadd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  name\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'Geofirestore'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  score\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e100\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// The coordinates field must be a GeoPoint!\u003c/span\u003e\n  coordinates\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003efirebase\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003efirestore\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eGeoPoint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e40.7589\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e73.9851\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Create a GeoQuery based on a location\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e query \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e geocollection\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003enear\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e center\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003efirebase\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003efirestore\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eGeoPoint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e40.7589\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e73.9851\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e radius\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1000\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Get query (as Promise)\u003c/span\u003e\nquery\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eget\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ethen\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003evalue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// All GeoDocument returned by GeoQuery, like the GeoDocument added above\u003c/span\u003e\n  \u003cspan class=\"token console class-name\"\u003econsole\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003evalue\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003edocs\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eAddig geospatial functionality with \u003ccode\u003egeofirex\u003c/code\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eUnfortunately \u003ccode\u003egeofirex\u003c/code\u003e has a peer dependency of \u003ccode\u003e\"firebase\": \"^7.2.0\"\u003c/code\u003e and firebase is at v9 as of 2021 so this may not be the best option\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eStart by adding some npm packages\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003e\u003cspan class=\"token function\"\u003enpm\u003c/span\u003e init -y\n\u003cspan class=\"token function\"\u003enpm\u003c/span\u003e i firebase-admin geofirex\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eCreate a file to seed the database\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e admin \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"firebase-admin\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e serviceAccount \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"./firebase-creds.json\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\nadmin\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003einitializeApp\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  credential\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e admin\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ecredential\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecert\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eserviceAccount\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  databaseURL\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"https://\u0026#x3C;FIREBASE_PROJECT_NAME\u003e.firebaseio.com\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Init GeoFireX\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e geofirex \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"geofirex\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e geo \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e geofirex\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003einit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eadmin\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e pinsRef \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e admin\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003efirestore\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecollection\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"pins\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Add some markers\u003c/span\u003e\npinsRef\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eadd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e name\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Phoenix\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e position\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e geo\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003epoint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e40\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e119\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\npinsRef\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eadd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e name\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Portland\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e position\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e geo\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003epoint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e45.52054\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e122.6795\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\npinsRef\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eadd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e name\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Vancouver\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e position\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e geo\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003epoint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e49.2827\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e123.1207\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\npinsRef\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eadd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e name\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Seattle\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e position\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e geo\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003epoint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e47.604311\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e122.33551\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\npinsRef\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eadd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e name\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"San Francisco\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e position\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e geo\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003epoint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e37.771800273\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e122.416534\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\npinsRef\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eadd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e name\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Ottawa\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e position\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e geo\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003epoint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e45.42062\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e75.697174\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\npinsRef\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eadd\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e name\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Victoria\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e position\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e geo\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003epoint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e48.426922\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e123.36341\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eNow you can make queries against your table\u003c/p\u003e\n\u003cdiv class=\"remark-highlight\"\u003e\u003cpre class=\"language-js\"\u003e\u003ccode class=\"language-js\"\u003e\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e admin \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"firebase-admin\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e serviceAccount \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"./firebase-creds.json\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\nadmin\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003einitializeApp\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  credential\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e admin\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003ecredential\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecert\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eserviceAccount\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  databaseURL\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"https://\u0026#x3C;FIREBASE_PROJECT_NAME\u003e.firebaseio.com\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// Init GeoFireX\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e geofirex \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"geofirex\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e geo \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e geofirex\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003einit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eadmin\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e pinsRef \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e admin\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003efirestore\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ecollection\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"pins\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// Query wthin\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003egetPointsWithin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e center\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e radius\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e field \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e query \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e geo\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003equery\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003epinsRef\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ewithin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecenter\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e radius\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e field\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e log\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e obs \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e query\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003epipe\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egeofirex\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003etoGeoJSON\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"position\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e geojson \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword control-flow\"\u003eawait\u003c/span\u003e geofirex\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eget\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eobs\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e geojson\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token function\"\u003egetPointsWithin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  center\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e geo\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003epoint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e47\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e122\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  radius\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e200\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token comment\"\u003e//km\u003c/span\u003e\n  field\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"position\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003eFirebase Storage\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eWhen working with an Application with user's it's best to make a folder in your storage with the uid of that user\u003c/li\u003e\n\u003cli\u003eWhen you add files to the \u003cem\u003eFirebase Storage\u003c/em\u003e it will create a storage location URL for that file\u003c/li\u003e\n\u003c/ul\u003e\n","ogImage":{"url":"/assets/covers/firebase.jpg"},"coverImage":"/assets/covers/firebase.jpg"}},"__N_SSG":true},"page":"/learn/[slug]","query":{"slug":"firebase"},"buildId":"NzREUFait-60KmE0wifXk","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-eef578260fd80f8fff94.js"></script><script src="/_next/static/chunks/webpack-189c53927ffd3caf09c3.js" async=""></script><script src="/_next/static/chunks/framework-c5113a73163ba9a6512c.js" async=""></script><script src="/_next/static/chunks/main-71948af4b0f09c0fc30e.js" async=""></script><script src="/_next/static/chunks/pages/_app-65342bae310ab86b4830.js" async=""></script><script src="/_next/static/chunks/664-aaadba6b31e09bfd632a.js" async=""></script><script src="/_next/static/chunks/pages/learn/%5Bslug%5D-696d4f00a359e13ae662.js" async=""></script><script src="/_next/static/NzREUFait-60KmE0wifXk/_buildManifest.js" async=""></script><script src="/_next/static/NzREUFait-60KmE0wifXk/_ssgManifest.js" async=""></script></body></html>